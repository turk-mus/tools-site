<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>أسعار اليوم السعودية | الذهب، الوقود، الحاسبات</title>
<meta content="موقع أسعار اليوم السعودية يوفر لك أحدث أسعار الذهب والوقود في السعودية، إلى جانب حاسبات ذكية مثل الزكاة والعمر وتحويل التاريخ." name="description"/>
<meta content="أسعار الذهب, أسعار الوقود, أسعار البنزين, حاسبة الزكاة, تحويل التاريخ, حاسبة العمر, السعودية, أسعار اليوم" name="keywords"/>
<meta content="أسعار اليوم السعودية" name="author"/>
<!-- AdSense -->
<meta content="ca-pub-6286972152122784" name="google-adsense-account"/>
<script async crossorigin="anonymous" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6286972152122784"></script>
<!-- Canonical & robots -->
<link href="https://as3aralywm.com/" rel="canonical"/>
<meta content="index,follow" name="robots"/>
<!-- Open Graph -->
<meta content="website" property="og:type"/>
<meta content="ar_SA" property="og:locale"/>
<meta content="أسعار اليوم السعودية" property="og:site_name"/>
<meta content="أسعار اليوم السعودية | الذهب، الوقود، الحاسبات" property="og:title"/>
<meta content="أحدث أسعار الذهب والوقود في السعودية مع حاسبات ذكية." property="og:description"/>
<meta content="https://as3aralywm.com/" property="og:url"/>
<meta content="/assets/og-cover.jpg" property="og:image"/>
<!-- Twitter -->
<meta content="summary_large_image" name="twitter:card"/>
<meta content="أسعار اليوم السعودية | الذهب، الوقود، الحاسبات" name="twitter:title"/>
<meta content="أحدث أسعار الذهب والوقود في السعودية مع حاسبات ذكية." name="twitter:description"/>
<meta content="/assets/og-cover.jpg" name="twitter:image"/>
<!-- Theme / favicon -->
<meta content="#8B5E3C" name="theme-color"/>
<!-- ADDED: منع تحويل الأرقام تلقائيًا لأرقام هاتف على iOS -->
<meta name="format-detection" content="telephone=no"><!-- ADDED -->
<link href="/assets/favicon.ico" rel="icon"/>
<!-- Font: Tajawal -->
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800&display=swap" rel="stylesheet"/>
<!-- Base CSS -->
<link rel="stylesheet" href="styles.css?v=1">
<!-- Quick base styles -->
<style>

/* Dark mode fix – يعمل عندما يكون الكلاس على body */
body.dark{
  background:#121212; color:#e0e0e0;
  color-scheme: dark; /* يحسّن مظهر القوائم/المدخلات */
}

/* عناصر عامة */
body.dark .navbar,
body.dark .breadcrumb,
body.dark .footer{
  background:#0f0f0f; border-color:#2b2b2b; color:#ddd;
}

body.dark .card,
body.dark .price-card,
body.dark .weather,
body.dark .matches,
body.dark .tools-grid .tool{
  background:#1c1c1c; border-color:#2b2b2b; color:#e8e8e8;
}

body.dark .btn,
body.dark .weather-btn,
body.dark .pill{
  background:#1e1e1e; color:#a6e0c2; border-color:#2b6f52;
}
body.dark .btn.btn--ghost{ background:transparent; color:#a6e0c2; border-color:#2b6f52; }

body.dark .muted{ color:#aaa }
body.dark .link{ color:#a6e0c2 }

/* إن كان لديك عناصر تضع خلفية للكونتينر */
body.dark .container,
body.dark .container--narrow,
body.dark main{
  background:transparent;
}

:root { color-scheme: light dark; }
body {
  font-family: "Tajawal", system-ui, -apple-system, "Segoe UI", Roboto, Arial, "Noto Kufi Arabic", sans-serif;
  background:#f6f6f6;
}
button, .btn, .weather-btn { cursor: pointer; }

/* ADDED: تحسين تركيز لوحة المفاتيح والوصولية */
:focus-visible { outline:2px solid #0a8f55; outline-offset:3px; border-radius:6px; } /* ADDED */
</style>
<!-- Google Analytics (gtag) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-D8W8C8PYS9"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-D8W8C8PYS9');
</script>
<!-- Structured data -->
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "أسعار اليوم السعودية",
    "url": "https://as3aralywm.com/",
    "inLanguage": "ar",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://as3aralywm.com/?q={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  }
</script>
<script type="application/ld+json">{"@context": "https://schema.org", "@type": "WebSite", "name": "أسعار اليوم السعودية", "url": "https://as3aralywm.com/", "potentialAction": {"@type": "SearchAction", "target": "https://as3aralywm.com/search?q={q}", "query-input": "required name=q"}}</script>
<script type="application/ld+json">{"@context": "https://schema.org", "@type": "Organization", "name": "أسعار اليوم السعودية", "url": "https://as3aralywm.com/"}</script>
<script type="application/ld+json">{"@context": "https://schema.org", "@type": "FAQPage", "mainEntity": [{"@type": "Question", "name": "هل تعتمد الأسعار على مصادر رسمية؟", "acceptedAnswer": {"@type": "Answer", "text": "نعم، نعتمد على مصادر موثوقة وإعلانات رسمية حين تتوفر، ونوضح إن كانت البيانات إرشادية."}}, {"@type": "Question", "name": "هل الأرقام صالحة للشراء مباشرة؟", "acceptedAnswer": {"@type": "Answer", "text": "هي مرجعية للمقارنة؛ ينبغي التأكد من السعر النهائي لدى البائع."}}, {"@type": "Question", "name": "هل يتم التحديث تلقائيًا؟", "acceptedAnswer": {"@type": "Answer", "text": "نعمل على تحديث دوري مع إبقاء محتوى نصي مفيد حتى عند تعذر الجلب."}}]}</script>
</head>
<body class="layout">
<!-- Navbar ثابت بدون حساب/تنبيهات -->
<header class="navbar">
<div class="navbar__left">
<a aria-label="الرئيسية" class="brand" href="home.html">
<span class="brand__logo">SA</span>
<span class="brand__name">أسعار اليوم السعودية</span>
</a>
</div>
<div class="navbar__center">
<nav aria-label="روابط" class="quick-links">
<a class="link" href="gold.html">الذهب</a>
<a class="link" href="fuel.html">البنزين</a>
<a class="link" href="weather.html">الطقس</a>
<a class="link" href="matches.html">المباريات</a>
<a class="link" href="news.html">الأخبار</a>
<a class="link" href="contact.html">تواصل</a>
</nav>
</div>
<div class="navbar__right">
<button aria-label="تبديل الوضع الليلي" class="icon-btn" id="themeToggle" aria-pressed="false">🌙</button><!-- ADDED aria-pressed -->
</div>
</header>
<!-- مسار -->
<nav aria-label="مسار" class="breadcrumb">
<ol>
<li><a href="home.html">الرئيسية</a></li>
<li aria-current="page">لوحة اليوم</li>
</ol>
</nav>
<!-- الشبكة: كل المربعات -->
<main class="container">
<section class="card" id="hero-intro" style="margin:20px 0; line-height:1.9">
<h1>أسعار اليوم السعودية — مرجعك اليومي الذكي</h1>
<p>تابع أحدث الأسعار والبيانات اليومية في السعودية مع شروحات مبسّطة وأدوات عملية: الذهب، البنزين، العملات، الطقس، والمزيد.</p>
<nav aria-label="الأقسام الرئيسية">
<ul style="display:flex;flex-wrap:wrap;gap:10px;list-style:none;padding:0;margin:10px 0;">
<li><a class="btn" href="/gold.html">أسعار الذهب</a></li>
<li><a class="btn" href="/fuel.html">أسعار البنزين</a></li>
<li><a class="btn" href="/matches.html">مباريات اليوم</a></li>
<li><a class="btn" href="/news.html">الأخبار</a></li>
<li><a class="btn" href="/holidays.html">الإجازات</a></li>
<li><a class="btn" href="/age.html">حاسبة العمر</a></li>
<li><a class="btn" href="/retirement.html">حاسبة التقاعد</a></li>
</ul>
</nav>
</section>

<!-- الذهب -->
<section aria-labelledby="gold-title" class="card" id="gold-card">
<div class="card__header">
<h2 class="card__title" id="gold-title">أسعار الذهب</h2>
<a class="btn btn--ghost" href="gold.html">المزيد</a>
</div>
<ul class="list" id="gold-prices" aria-live="polite"><!-- ADDED aria-live -->
<li>جرام <strong>24</strong>: <span id="gold-24">—</span> <span class="currency">﷼</span></li>
<li>جرام <strong>22</strong>: <span id="gold-22">—</span> <span class="currency">﷼</span></li>
</ul>
<p class="meta">آخر تحديث: <time id="gold-updated">—</time></p>
</section>
<!-- البنزين -->
<section aria-labelledby="fuel-title" class="card" id="fuel-card">
<div class="card__header">
<h2 class="card__title" id="fuel-title">أسعار البنزين</h2>
<a class="btn btn--ghost" href="fuel.html">المزيد</a>
</div>
<div class="split" aria-live="polite"><!-- ADDED aria-live -->
<div class="pill"><span>95</span><b id="fuel-95">—</b><span class="currency">﷼</span></div>
<div class="pill"><span>91</span><b id="fuel-91">—</b><span class="currency">﷼</span></div>
</div>
<p class="hint">تحديث شهري.</p>
</section>
<!-- الطقس -->
<section aria-labelledby="weather-title" class="card" id="weather-card">
<div class="card__header">
<h2 class="card__title" id="weather-title">الطقس الآن</h2>
<a class="btn btn--ghost" href="weather.html">المزيد</a>
</div>
<div class="weather" aria-live="polite"><!-- ADDED aria-live -->
<div class="weather__city">
<span id="wx-city">—</span>
<small class="muted" id="wx-desc">—</small>
</div>
<div class="weather__temp"><span id="wx-temp">—</span><sup>°</sup></div>
</div>
</section>
<!-- العملات (سعر صرف مختصر) -->
<section aria-labelledby="fx-title" class="card" id="fx-card">
<div class="card__header">
<h2 class="card__title" id="fx-title">أسعار العملات</h2>
</div>
<ul class="list" id="fx-list"></ul>
<p class="meta">بيانات إرشادية.</p>
</section>
<!-- العملات الرقمية -->
<section aria-labelledby="crypto-title" class="card" id="crypto-card">
<div class="card__header">
<h2 class="card__title" id="crypto-title">العملات الرقمية</h2>
</div>
<ul class="list" id="crypto-list" aria-live="polite"></ul><!-- ADDED aria-live -->
</section>
<!-- المباريات -->
<section aria-labelledby="matches-title" class="card" id="matches-card">
<div class="card__header">
<h2 class="card__title" id="matches-title">مباريات اليوم</h2>
<a class="btn btn--ghost" href="matches.html">المزيد</a>
</div>
<ul class="matches" id="matches-list" aria-live="polite"></ul><!-- ADDED aria-live -->
</section>
<!-- الإجازات -->
<section aria-labelledby="holidays-title" class="card" id="holidays-card">
<div class="card__header">
<h2 class="card__title" id="holidays-title">أقرب إجازة دراسية</h2>
<a class="btn btn--ghost" href="holidays.html">المزيد</a>
</div>
<div class="holiday" id="next-holiday" aria-live="polite">جاري التحميل…</div><!-- ADDED aria-live -->
<p class="meta">آخر تحديث: <time id="hol-updated">—</time></p>
</section>
<!-- الترندات (X) -->
<section aria-labelledby="trends-title" class="card" id="trends-card">
<div class="card__header">
<h2 class="card__title" id="trends-title">ترندات السعودية</h2>
</div>
<ol class="list" id="x-trends" aria-live="polite"></ol><!-- ADDED aria-live -->
</section>
<!-- أدوات وحاسبات -->
<section aria-labelledby="tools-title" class="card" id="tools-card">
<div class="card__header">
<h2 class="card__title" id="tools-title">أدوات وحاسبات</h2>
</div>
<div class="tools-grid">
<a class="tool" href="zakat.html">حاسبة الزكاة</a>
<a class="tool" href="age.html">حاسبة العمر</a>
<a class="tool" href="retirement.html">حاسبة التقاعد</a>
<a class="tool" href="history.html">تحويل بين الهجري والميلادي</a>
<a class="tool" href="VAT.html">ضريبة القيمة المضافة</a>
<a class="tool" href="/articles/">المقالات</a>
</div>
</section>
<!-- الأخبار/المقالات -->
<section aria-labelledby="news-title" class="card" id="news-card">
<div class="card__header">
<h2 class="card__title" id="news-title">الأخبار</h2>
<a class="btn btn--ghost" href="news.html">المزيد</a>
</div>
<ul class="list" id="articles-list" aria-live="polite"></ul><!-- ADDED aria-live -->
</section>

<section class="card" id="featured-articles" style="margin:20px 0;">
  <h2>مقالات مختارة</h2>
  <ul>
    <li><a href="articles/as3ar-al-dhahab-sa.html">أسعار الذهب اليوم في السعودية: دليل شامل للتحديثات والنصائح</a></li>
    <li><a href="articles/as3ar-al-benzin-2025.html">أسعار البنزين في السعودية اليوم: مقارنة شهرية وتأثيرها على المصاريف</a></li>
    <li><a href="articles/as3ar-al-dollar-riyal.html">سعر الدولار مقابل الريال السعودي اليوم: ماذا يعني لك؟</a></li>
    <li><a href="articles/as3ar-al-umrah.html">تكلفة العمرة من داخل السعودية: باقات وإرشادات اختيار الأنسب</a></li>
    <li><a href="articles/as3ar-al-hajj.html">تكلفة الحج للمقيمين في السعودية: مقارنة البرامج الاقتصادية والمميزة</a></li>
    <li><a href="articles/as3ar-alkahwa.html">أسعار القهوة المختصة في السعودية: أين تشتري بأفضل سعر؟</a></li>
  </ul>
</section>


<section class="card" id="site-faq" style="margin:20px 0;">
<h2>أسئلة شائعة</h2>
<details><summary>هل تعتمد الأسعار على مصادر رسمية؟</summary>
<p>نعم، نعتمد على مصادر موثوقة وإعلانات رسمية حين تتوفر، ونضع توضيحًا إذا كانت البيانات إرشادية.</p>
</details>
<details><summary>هل يمكن الاعتماد على الأرقام للشراء مباشرة؟</summary>
<p>الأرقام مرجعية وتُستخدم للمقارنة. تحقق من السعر النهائي لدى المتجر/المحطة.</p>
</details>
<details><summary>هل يتم التحديث تلقائيًا؟</summary>
<p>نعمل على تحديث الصفحات دوريًا، ومع ذلك قد تتأخر بعض المصادر؛ نبقي محتوىً نصيًا مفيدًا ظاهرًا حتى عند تعذر الجلب.</p>
</details>
</section>
</main>

<!-- ADDED: بدائل بدون جافاسكريبت لمنع صفحة “فارغة” -->
<noscript>
  <div class="container--narrow" style="max-width:820px;margin:0 auto 20px">
    <div class="card">⚠️ بعض الصناديق تعتمد على جلب البيانات. لتجربة كاملة، فعّل JavaScript.</div>
  </div>
</noscript>
<!-- تذييل -->
<footer class="footer">
<div class="container--narrow">
<p>© <span id="y"></span> أسعار اليوم السعودية</p>
<nav class="footer__nav">
<a href="privacy.html">الخصوصية</a>
<a href="terms.html">الشروط</a>
<a href="about.html">من نحن</a>
<a href="contact.html">تواصل معنا</a>
</nav>
</div>
</footer>
<!-- ملف الإجازات (نفس مصدر القديم) -->
<script src="/assets/holidays-data.js"></script>
<!-- سكربتات الصفحة: نفس مصادر البيانات للقديم -->
<script>
    // سنة الحقوق + تبديل الوضع الليلي
    document.getElementById('y').textContent = new Date().getFullYear();
    document.getElementById('themeToggle')?.addEventListener('click', () => {
      const isDark = document.body.classList.toggle('dark');
      // ADDED: تحديث حالة الوصولية للزر
      document.getElementById('themeToggle').setAttribute('aria-pressed', isDark ? 'true' : 'false'); // ADDED
    });

    // ============ الذهب: نفس مصدر القديم (gold.json) ============  
    async function loadGoldFromJson(){
      const el24 = document.getElementById('gold-24');
      const el22 = document.getElementById('gold-22');
      const upd  = document.getElementById('gold-updated');
      if(!el24 || !el22) return;

      try{
        const r = await fetch('gold.json', { cache:'no-store' });
        if(!r.ok) throw new Error('HTTP ' + r.status);
        const j = await r.json();

        const nf = new Intl.NumberFormat('ar-SA', { minimumFractionDigits:2, maximumFractionDigits:2 });

        let g24, g22;
        if (j.grams && (j.grams['24'] || j.grams[24])) {
          g24 = Number(j.grams['24'] ?? j.grams[24]);
          g22 = Number(j.grams['22'] ?? j.grams[22]) || (g24 * 22 / 24);
        } else {
          const ex = (j.exchange_rate != null) ? Number(j.exchange_rate) : 3.75;
          const ounceSar = (j.price_ounce_sar != null)
            ? Number(j.price_ounce_sar)
            : (j.price_ounce_usd != null ? Number(j.price_ounce_usd) * ex : null);
          if (ounceSar) {
            const perGram24 = ounceSar / 31.1035;
            g24 = perGram24; g22 = perGram24 * 22/24;
          }
        }

        if (!g24 || !g22) throw new Error('no data');

        el24.textContent = nf.format(g24);
        el22.textContent = nf.format(g22);
        if (upd) {
          const when =
            j.updated_at || j.last_updated || j.updatedAt ||
            new Date().toISOString();
          upd.textContent = when.replace('T',' ').slice(0,16);
        }

        // ADDED: JSON-LD مبسّط لحالة الذهب (اختياري لمحركات البحث)
        try {
          const ld = {
            "@context":"https://schema.org",
            "@type":"WebPage",
            "name":"ملخص أسعار الذهب اليوم",
            "inLanguage":"ar",
            "about":{"@type":"Thing","name":"Gold price in Saudi Arabia"},
            "dateModified": new Date().toISOString()
          };
          const s = document.createElement('script');
          s.type='application/ld+json'; s.dataset.jsonld='gold-mini';
          s.textContent = JSON.stringify(ld);
          document.head.querySelector('script[data-jsonld="gold-mini"]')?.remove();
          document.head.appendChild(s);
        } catch {}
      }catch(e){
        console.error('gold json error', e);
      }
    }

    // ============ البنزين: القديم كان ثابت ============
    function fillFuelStatic(){
      const f95 = document.getElementById('fuel-95');
      const f91 = document.getElementById('fuel-91');
      if (f95) f95.textContent = '2.33';
      if (f91) f91.textContent = '2.18';
    }

    // ============ الطقس: نفس لوجيك القديم (Open-Meteo + revgeo) ============
    (function miniWeather(){
      const cityEl = document.getElementById('wx-city');
      const descEl = document.getElementById('wx-desc');
      const tempEl = document.getElementById('wx-temp');

      const codeMap = {
        0:['صحو','☀️'],1:['صافٍ غالبًا','🌤️'],2:['غائم جزئيًا','⛅'],3:['غائم','☁️'],
        45:['ضباب','🌫️'],48:['ضباب','🌫️'],51:['رذاذ خفيف','🌦️'],53:['رذاذ','🌦️'],55:['رذاذ كثيف','🌧️'],
        61:['مطر خفيف','🌧️'],63:['مطر','🌧️'],65:['مطر غزير','🌧️'],
        66:['مطر متجمد','🌨️'],67:['مطر متجمد','🌨️'],71:['ثلج خفيف','❄️'],73:['ثلج','❄️'],75:['ثلج كثيف','❄️'],
        77:['حبات جليد','🌨️'],80:['زخات خفيفة','🌦️'],81:['زخات','🌧️'],82:['زخات قوية','🌧️'],
        85:['زخات ثلج','❄️'],86:['زخات ثلج قوية','❄️'],95:['عواصف رعدية','⛈️'],96:['عواصف مع بَرَد','⛈️'],99:['عواصف مع بَرَد كثيف','⛈️']
      };
      const wx = code => codeMap[code] ? codeMap[code][0] : 'الطقس';

      async function reverseGeocode(lat, lon){
        try{
          const r = await fetch(`/.netlify/functions/revgeo?lat=${lat}&lon=${lon}&lang=ar`, { cache:'no-store' });
          if(!r.ok) return null;
          const j = await r.json();
          const g = j?.results?.[0];
          if(!g) return null;
          return [g.name, g.admin1 || g.country].filter(Boolean).join('، ');
        }catch{return null;}
      }

      async function load(lat, lon){
        try{
          const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&timezone=auto`, { cache:'no-store' });
          if(!res.ok) throw new Error('wx http ' + res.status);
          const data = await res.json();
          const cw = data.current_weather;
          if(!cw) throw new Error('no cw');
          tempEl.textContent = Math.round(cw.temperature);
          descEl.textContent = wx(cw.weathercode);

          const nice = await reverseGeocode(lat, lon);
          cityEl.textContent = nice || 'الرياض، السعودية';
        }catch(e){
          console.warn('wx error', e);
          cityEl.textContent = 'الرياض، السعودية';
        }
      }

      const fallback = { lat: 24.7136, lon: 46.6753 };
      if (!navigator.geolocation) { load(fallback.lat, fallback.lon); return; }
      navigator.geolocation.getCurrentPosition(
        pos => load(pos.coords.latitude, pos.coords.longitude),
        ()  => load(fallback.lat, fallback.lon),
        { enableHighAccuracy:false, timeout:15000, maximumAge:600000 }
      );
    })();

    // ============ العملات الرقمية ============
    (function loadCrypto(){
      const list = document.getElementById('crypto-list');
      if(!list) return;
      const COIN_IDS = 'bitcoin,ethereum,tether,solana,binancecoin,ripple';
      const nf = new Intl.NumberFormat('ar-SA', { minimumFractionDigits: 2, maximumFractionDigits: 2 });

      async function run(){
        list.innerHTML = '<li>جاري التحميل…</li>';
        try{
          const r = await fetch('/.netlify/functions/crypto?ids=' + encodeURIComponent(COIN_IDS), { cache: 'no-store' });
          if(!r.ok) throw new Error('HTTP ' + r.status);
          const arr = await r.json();
          list.innerHTML = '';
          arr.forEach(c => {
            const price = c.priceUSD ?? c.price ?? c.current_price;
            const ch    = c.change24h ?? c.changePercent24h ?? c.price_change_percentage_24h;
            const li = document.createElement('li');
            const chStr = (ch == null) ? '' : ((ch >= 0 ? '▲ ' : '▼ ') + nf.format(ch) + '%');
            li.innerHTML = `<strong>${(c.symbol || c.id || '').toString().toUpperCase()}</strong>: <b>${nf.format(price)}</b> USD <span style="opacity:.8">${chStr}</span>`;
            li.style.color = (ch ?? 0) >= 0 ? '#0a8f55' : '#c0392b';
            list.appendChild(li);
          });
        }catch(e){
          console.error(e);
          list.innerHTML = '<li>تعذّر الجلب الآن.</li>';
        }
      }
      run();
      setInterval(run, 15 * 60 * 1000);
    })();

    // ============ المباريات ============
    async function loadSaudiMatches(){
      const ul = document.getElementById('matches-list');
      if(!ul) return;
      ul.innerHTML = '<li>جاري التحميل…</li>';
      try{
        const qs = new URLSearchParams({ league: 'pro', limit: '4', type: 'both' }).toString();
        const r  = await fetch('/.netlify/functions/saudi-matches?' + qs, { cache: 'no-store' });
        if(!r.ok) throw new Error('HTTP ' + r.status);
        const data = await r.json();

        const rows = [];
        const past = Array.isArray(data.past) ? data.past.slice(0, 1) : [];
        const next = Array.isArray(data.next) ? data.next.slice(0, 1) : [];
        const picked = [...past, ...next];

        ul.innerHTML = '';
        if(!picked.length){ ul.innerHTML = '<li>لا توجد بيانات حالياً.</li>'; return; }

        picked.forEach(m => {
          const haveScore = m.homeScore != null && m.awayScore != null;
          const when = m.date ? new Date(m.date).toLocaleString('ar-SA', { hour12:false }) : '';
          const li = document.createElement('li');
          li.className = 'match';
          li.innerHTML = `
            <div class="match__row">
              <span>${m.home}</span>
              <strong style="min-width:52px;text-align:center">${haveScore ? `${m.homeScore} - ${m.awayScore}` : 'VS'}</strong>
              <span>${m.away}</span>
            </div>
            <div class="match__meta muted" style="font-size:12px">${when}</div>
          `;
          ul.appendChild(li);
        });
      }catch(e){
        console.error('matches error', e);
        ul.innerHTML = '<li>تعذّر تحميل المباريات الآن.</li>';
      }
    }

    // ============ الإجازات ============
    (function holidaysBox(){
      function fmtRange(s,e){
        const opt = { year:'numeric', month:'2-digit', day:'2-digit' };
        const a = new Date(s), b = new Date(e);
        const g = d => d.toLocaleDateString('ar-SA', opt);
        return (g(a) === g(b)) ? g(a) : (g(a) + ' — ' + g(b));
      }
      function leftDays(s){
        const ms = 86400000;
        const t = new Date(); t.setHours(0,0,0,0);
        const d = new Date(s); d.setHours(0,0,0,0);
        return Math.ceil((d - t) / ms);
      }
      function getUpcoming(list){
        const today = new Date(); today.setHours(0,0,0,0);
        return (list||[])
          .filter(h => new Date(h.end || h.start) >= today)
          .sort((a,b) => new Date(a.start) - new Date(b.start));
      }
      function render(){
        try{
          const data = window.HOLIDAYS || [];
          const upcoming = getUpcoming(data);
          const box = document.getElementById('next-holiday');
          const upd = document.getElementById('hol-updated');

          if (upd && window.HOLIDAYS_UPDATED_AT) {
            upd.textContent = new Date(window.HOLIDAYS_UPDATED_AT).toLocaleString('ar-SA', { hour12:false });
          }

          if (!upcoming.length){ box.textContent = 'لا توجد إجازات قريبة.'; return; }
          const h = upcoming[0];
          const days = leftDays(h.start);
          const note = days > 0 ? `تبقّى ${days} يوم` : (days === 0 ? 'اليوم' : '');
          box.innerHTML = `
            <div style="font-weight:700;line-height:1.4">${h.title}</div>
            <div class="muted" style="font-size:12px">${fmtRange(h.start, h.end)}${note ? ' • ' + note : ''}</div>
          `;

          // ADDED: JSON-LD مصغّر للإجازة القادمة (اختياري)
          try {
            const ld = {
              "@context":"https://schema.org",
              "@type":"Event",
              "name": h.title,
              "startDate": h.start,
              "endDate": h.end || h.start
            };
            const s = document.createElement('script');
            s.type='application/ld+json'; s.dataset.jsonld='next-holiday';
            s.textContent = JSON.stringify(ld);
            document.head.querySelector('script[data-jsonld="next-holiday"]')?.remove();
            document.head.appendChild(s);
          } catch {}
        }catch(e){
          console.error(e);
          const box = document.getElementById('next-holiday');
          if (box) box.textContent = 'تعذّر تحميل الإجازات.';
        }
      }
      document.addEventListener('DOMContentLoaded', render);
    })();

    // ============ الترندات ============
    async function loadTrends(){
      const list = document.getElementById('x-trends');
      if(!list) return;
      list.innerHTML = '<li>جاري التحميل…</li>';
      try{
        const r = await fetch('/.netlify/functions/x-trends-cached?country=SA&limit=10', { cache: 'no-store' });
        if(!r.ok) throw new Error('HTTP ' + r.status);
        const data = await r.json();
        const arr  = Array.isArray(data) ? data : (data.trends || []);

        list.innerHTML = '';
        if (!arr.length){ list.innerHTML = '<li>لا توجد نتائج حالياً.</li>'; return; }

        arr.forEach((t, i) => {
          const raw = (t.name || '').trim();
          if(!raw) return;
          const label = raw.startsWith('#') ? raw : ('#' + raw);
          const aHref = (t.url && /^https?:\/\//i.test(t.url))
            ? t.url
            : 'https://x.com/search?q=' + encodeURIComponent(label);

          const li = document.createElement('li');
          li.innerHTML = `<a href="${aHref}" target="_blank" rel="noopener" class="hash-link">${i+1}. ${label.replace(/^#/,'')}</a>`;
          list.appendChild(li);
        });
      }catch(e){
        console.error('trends error', e);
        list.innerHTML = '<li>تعذّر جلب الترند الآن.</li>';
      }
    }

    // ============ الأخبار ============
    async function loadNews(){
      const list = document.getElementById('articles-list');
      if(!list) return;
      list.innerHTML = '<li>جاري التحميل…</li>';
      try{
        const res = await fetch('/.netlify/functions/news?limit=4&sfw=1', { cache:'no-store' });
        if(!res.ok) throw new Error('news http ' + res.status);
        const data = await res.json();
        list.innerHTML = '';

        (data.items || []).forEach(item => {
          const time = item.pubDate ? new Date(item.pubDate).toLocaleString('ar-SA', { hour12: false }) : '';
          const li = document.createElement('li');
          li.innerHTML = `
            <a href="${item.link}" target="_blank" rel="noopener" style="text-decoration:none;color:inherit">
              <div class="news-title" style="font-weight:600;line-height:1.4">${item.title}</div>
              <div class="news-meta muted" style="font-size:12px">${item.source || ''}${time ? ' • ' + time : ''}</div>
            </a>
          `;
          list.appendChild(li);
        });

        // ADDED: JSON-LD بسيط لقائمة المقالات الظاهرة (اختياري)
        try {
          const items = (data.items || []).slice(0,4).map((it, idx) => ({
            "@type":"ListItem","position":idx+1,
            "item":{"@type":"Article","headline":it.title,"url":it.link}
          }));
          const ld = {"@context":"https://schema.org","@type":"ItemList","name":"آخر الأخبار","itemListElement":items};
          const s = document.createElement('script');
          s.type='application/ld+json'; s.dataset.jsonld='news-list';
          s.textContent = JSON.stringify(ld);
          document.head.querySelector('script[data-jsonld="news-list"]')?.remove();
          document.head.appendChild(s);
        } catch {}
      }catch(e){
        console.error('news error', e);
        list.innerHTML = '<li>تعذّر تحميل الأخبار الآن.</li>';
      }
    }

    // (اختياري إرشادي) أسعار عملات تقليدية بسيطة — لا يوجد مصدر في القديم
    function fillFxAdvisory(){
      const ul = document.getElementById('fx-list');
      if(!ul) return;
      ul.innerHTML = `
        <li>USD / SAR: <b>3.75</b></li>
      `;
    }

    // تشغيل كل شيء
    document.addEventListener('DOMContentLoaded', () => {
      fillFuelStatic();         // وقود ثابت كما في القديم
      loadGoldFromJson();       // الذهب من gold.json (نفس القديم)
      loadSaudiMatches();       // المباريات من Function القديمة
      loadTrends();             // ترندات X من Function القديمة
      loadNews();               // الأخبار من Function القديمة
      fillFxAdvisory();         // "إرشادي" فقط
    });
</script>
</body>
</html>
