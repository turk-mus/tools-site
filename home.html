<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© | Ø§Ù„Ø°Ù‡Ø¨ØŒ Ø§Ù„ÙˆÙ‚ÙˆØ¯ØŒ Ø§Ù„Ø­Ø§Ø³Ø¨Ø§Øª</title>
  <meta name="description" content="Ù…ÙˆÙ‚Ø¹ Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© ÙŠÙˆÙØ± Ù„Ùƒ Ø£Ø­Ø¯Ø« Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø°Ù‡Ø¨ ÙˆØ§Ù„ÙˆÙ‚ÙˆØ¯ ÙÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©ØŒ Ø¥Ù„Ù‰ Ø¬Ø§Ù†Ø¨ Ø­Ø§Ø³Ø¨Ø§Øª Ø°ÙƒÙŠØ© Ù…Ø«Ù„ Ø§Ù„Ø²ÙƒØ§Ø© ÙˆØ§Ù„Ø¹Ù…Ø± ÙˆØªØ­ÙˆÙŠÙ„ Ø§Ù„ØªØ§Ø±ÙŠØ®." />
  <meta name="keywords" content="Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø°Ù‡Ø¨, Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ÙˆÙ‚ÙˆØ¯, Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø¨Ù†Ø²ÙŠÙ†, Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø²ÙƒØ§Ø©, ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØªØ§Ø±ÙŠØ®, Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø¹Ù…Ø±, Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©, Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ÙŠÙˆÙ…" />
  <meta name="author" content="Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©" />

  <!-- AdSense -->
  <meta name="google-adsense-account" content="ca-pub-6286972152122784" />
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6286972152122784" crossorigin="anonymous"></script>

  <!-- Canonical & robots -->
  <link rel="canonical" href="https://as3aralywm.com/" />
  <meta name="robots" content="index,follow" />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="ar_SA" />
  <meta property="og:site_name" content="Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©" />
  <meta property="og:title" content="Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© | Ø§Ù„Ø°Ù‡Ø¨ØŒ Ø§Ù„ÙˆÙ‚ÙˆØ¯ØŒ Ø§Ù„Ø­Ø§Ø³Ø¨Ø§Øª" />
  <meta property="og:description" content="Ø£Ø­Ø¯Ø« Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø°Ù‡Ø¨ ÙˆØ§Ù„ÙˆÙ‚ÙˆØ¯ ÙÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© Ù…Ø¹ Ø­Ø§Ø³Ø¨Ø§Øª Ø°ÙƒÙŠØ©." />
  <meta property="og:url" content="https://as3aralywm.com/" />
  <meta property="og:image" content="/assets/og-cover.jpg" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© | Ø§Ù„Ø°Ù‡Ø¨ØŒ Ø§Ù„ÙˆÙ‚ÙˆØ¯ØŒ Ø§Ù„Ø­Ø§Ø³Ø¨Ø§Øª" />
  <meta name="twitter:description" content="Ø£Ø­Ø¯Ø« Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø°Ù‡Ø¨ ÙˆØ§Ù„ÙˆÙ‚ÙˆØ¯ ÙÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© Ù…Ø¹ Ø­Ø§Ø³Ø¨Ø§Øª Ø°ÙƒÙŠØ©." />
  <meta name="twitter:image" content="/assets/og-cover.jpg" />

  <!-- Theme / favicon -->
  <meta name="theme-color" content="#8B5E3C" />
  <link rel="icon" href="/assets/favicon.ico" />

  <!-- Font: Tajawal -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800&display=swap" rel="stylesheet">

  <!-- Base CSS -->
  <link rel="preload" href="/assets/home.css" as="style" />
  <link rel="stylesheet" href="styles.css?v=1">

  <!-- Quick base styles -->
  <style>

/* Dark mode fix â€“ ÙŠØ¹Ù…Ù„ Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙƒÙˆÙ† Ø§Ù„ÙƒÙ„Ø§Ø³ Ø¹Ù„Ù‰ body */
body.dark{
  background:#121212; color:#e0e0e0;
  color-scheme: dark; /* ÙŠØ­Ø³Ù‘Ù† Ù…Ø¸Ù‡Ø± Ø§Ù„Ù‚ÙˆØ§Ø¦Ù…/Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª */
}

/* Ø¹Ù†Ø§ØµØ± Ø¹Ø§Ù…Ø© */
body.dark .navbar,
body.dark .breadcrumb,
body.dark .footer{
  background:#0f0f0f; border-color:#2b2b2b; color:#ddd;
}

body.dark .card,
body.dark .price-card,
body.dark .weather,
body.dark .matches,
body.dark .tools-grid .tool{
  background:#1c1c1c; border-color:#2b2b2b; color:#e8e8e8;
}

body.dark .btn,
body.dark .weather-btn,
body.dark .pill{
  background:#1e1e1e; color:#a6e0c2; border-color:#2b6f52;
}
body.dark .btn.btn--ghost{ background:transparent; color:#a6e0c2; border-color:#2b6f52; }

body.dark .muted{ color:#aaa }
body.dark .link{ color:#a6e0c2 }

/* Ø¥Ù† ÙƒØ§Ù† Ù„Ø¯ÙŠÙƒ Ø¹Ù†Ø§ØµØ± ØªØ¶Ø¹ Ø®Ù„ÙÙŠØ© Ù„Ù„ÙƒÙˆÙ†ØªÙŠÙ†Ø± */
body.dark .container,
body.dark .container--narrow,
body.dark main{
  background:transparent;
}


    :root { color-scheme: light dark; }
    body {
      font-family: "Tajawal", system-ui, -apple-system, "Segoe UI", Roboto, Arial, "Noto Kufi Arabic", sans-serif;
      background:#f6f6f6;
    }
    button, .btn, .weather-btn { cursor: pointer; }
  </style>

  <!-- Google Analytics (gtag) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-D8W8C8PYS9"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-D8W8C8PYS9');
  </script>

  <!-- Structured data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©",
    "url": "https://as3aralywm.com/",
    "inLanguage": "ar",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://as3aralywm.com/?q={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  }
  </script>
</head>

<body class="layout">
  <!-- Navbar Ø«Ø§Ø¨Øª Ø¨Ø¯ÙˆÙ† Ø­Ø³Ø§Ø¨/ØªÙ†Ø¨ÙŠÙ‡Ø§Øª -->
  <header class="navbar">
    <div class="navbar__left">
      <a class="brand" href="home.html" aria-label="Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©">
        <span class="brand__logo">SA</span>
        <span class="brand__name">Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</span>
      </a>
    </div>

    <div class="navbar__center">
      <nav class="quick-links" aria-label="Ø±ÙˆØ§Ø¨Ø·">
        <a class="link" href="gold.html">Ø§Ù„Ø°Ù‡Ø¨</a>
        <a class="link" href="fuel.html">Ø§Ù„Ø¨Ù†Ø²ÙŠÙ†</a>
        <a class="link" href="weather.html">Ø§Ù„Ø·Ù‚Ø³</a>
        <a class="link" href="matches.html">Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª</a>
        <a class="link" href="news.html">Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</a>
        <a class="link" href="contact.html">ØªÙˆØ§ØµÙ„</a>
      </nav>
    </div>

    <div class="navbar__right">
      <button id="themeToggle" class="icon-btn" aria-label="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ">ğŸŒ™</button>
    </div>
  </header>

  <!-- Ù…Ø³Ø§Ø± -->
  <nav class="breadcrumb" aria-label="Ù…Ø³Ø§Ø±">
    <ol>
      <li><a href="home.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
      <li aria-current="page">Ù„ÙˆØ­Ø© Ø§Ù„ÙŠÙˆÙ…</li>
    </ol>
  </nav>

  <!-- Ø§Ù„Ø´Ø¨ÙƒØ©: ÙƒÙ„ Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª -->
  <main class="container">
    <!-- Ø§Ù„Ø°Ù‡Ø¨ -->
    <section class="card" id="gold-card" aria-labelledby="gold-title">
      <div class="card__header">
        <h2 class="card__title" id="gold-title">Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø°Ù‡Ø¨</h2>
        <a class="btn btn--ghost" href="gold.html">Ø§Ù„Ù…Ø²ÙŠØ¯</a>
      </div>
      <ul id="gold-prices" class="list">
        <li>Ø¬Ø±Ø§Ù… <strong>24</strong>: <span id="gold-24">â€”</span> <span class="currency">ï·¼</span></li>
        <li>Ø¬Ø±Ø§Ù… <strong>22</strong>: <span id="gold-22">â€”</span> <span class="currency">ï·¼</span></li>
      </ul>
      <p class="meta">Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: <time id="gold-updated">â€”</time></p>
    </section>

    <!-- Ø§Ù„Ø¨Ù†Ø²ÙŠÙ† -->
    <section class="card" id="fuel-card" aria-labelledby="fuel-title">
      <div class="card__header">
        <h2 class="card__title" id="fuel-title">Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø¨Ù†Ø²ÙŠÙ†</h2>
        <a class="btn btn--ghost" href="fuel.html">Ø§Ù„Ù…Ø²ÙŠØ¯</a>
      </div>
      <div class="split">
        <div class="pill"><span>95</span><b id="fuel-95">â€”</b><span class="currency">ï·¼</span></div>
        <div class="pill"><span>91</span><b id="fuel-91">â€”</b><span class="currency">ï·¼</span></div>
      </div>
      <p class="hint">ØªØ­Ø¯ÙŠØ« Ø´Ù‡Ø±ÙŠ.</p>
    </section>

    <!-- Ø§Ù„Ø·Ù‚Ø³ -->
    <section class="card" id="weather-card" aria-labelledby="weather-title">
      <div class="card__header">
        <h2 class="card__title" id="weather-title">Ø§Ù„Ø·Ù‚Ø³ Ø§Ù„Ø¢Ù†</h2>
        <a class="btn btn--ghost" href="weather.html">Ø§Ù„Ù…Ø²ÙŠØ¯</a>
      </div>
      <div class="weather">
        <div class="weather__city">
          <span id="wx-city">â€”</span>
          <small id="wx-desc" class="muted">â€”</small>
        </div>
        <div class="weather__temp"><span id="wx-temp">â€”</span><sup>Â°</sup></div>
      </div>
    </section>

    <!-- Ø§Ù„Ø¹Ù…Ù„Ø§Øª (Ø³Ø¹Ø± ØµØ±Ù Ù…Ø®ØªØµØ±) -->
    <section class="card" id="fx-card" aria-labelledby="fx-title">
      <div class="card__header">
        <h2 class="card__title" id="fx-title">Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø¹Ù…Ù„Ø§Øª</h2>
      </div>
      <ul class="list" id="fx-list"></ul>
      <p class="meta">Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ø±Ø´Ø§Ø¯ÙŠØ©.</p>
    </section>

    <!-- Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ© -->
    <section class="card" id="crypto-card" aria-labelledby="crypto-title">
      <div class="card__header">
        <h2 class="card__title" id="crypto-title">Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ©</h2>
      </div>
      <ul class="list" id="crypto-list"></ul>
    </section>

    <!-- Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª -->
    <section class="card" id="matches-card" aria-labelledby="matches-title">
      <div class="card__header">
        <h2 class="card__title" id="matches-title">Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…</h2>
        <a class="btn btn--ghost" href="matches.html">Ø§Ù„Ù…Ø²ÙŠØ¯</a>
      </div>
      <ul class="matches" id="matches-list"></ul>
    </section>

    <!-- Ø§Ù„Ø¥Ø¬Ø§Ø²Ø§Øª -->
    <section class="card" id="holidays-card" aria-labelledby="holidays-title">
      <div class="card__header">
        <h2 class="card__title" id="holidays-title">Ø£Ù‚Ø±Ø¨ Ø¥Ø¬Ø§Ø²Ø© Ø¯Ø±Ø§Ø³ÙŠØ©</h2>
        <a class="btn btn--ghost" href="holidays.html">Ø§Ù„Ù…Ø²ÙŠØ¯</a>
      </div>
      <div id="next-holiday" class="holiday">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„â€¦</div>
      <p class="meta">Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: <time id="hol-updated">â€”</time></p>
    </section>

    <!-- Ø§Ù„ØªØ±Ù†Ø¯Ø§Øª (X) -->
    <section class="card" id="trends-card" aria-labelledby="trends-title">
      <div class="card__header">
        <h2 class="card__title" id="trends-title">ØªØ±Ù†Ø¯Ø§Øª Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</h2>
      </div>
      <ol class="list" id="x-trends"></ol>
    </section>

    <!-- Ø£Ø¯ÙˆØ§Øª ÙˆØ­Ø§Ø³Ø¨Ø§Øª -->
    <section class="card" id="tools-card" aria-labelledby="tools-title">
      <div class="card__header">
        <h2 class="card__title" id="tools-title">Ø£Ø¯ÙˆØ§Øª ÙˆØ­Ø§Ø³Ø¨Ø§Øª</h2>
      </div>
      <div class="tools-grid">
        <a class="tool" href="zakat.html">Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø²ÙƒØ§Ø©</a>
        <a class="tool" href="age.html">Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø¹Ù…Ø±</a>
        <a class="tool" href="retirement.html">Ø­Ø§Ø³Ø¨Ø© Ø§Ù„ØªÙ‚Ø§Ø¹Ø¯</a>
        <a class="tool" href="history.html">ØªØ­ÙˆÙŠÙ„ Ø¨ÙŠÙ† Ø§Ù„Ù‡Ø¬Ø±ÙŠ ÙˆØ§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ</a>
        <a class="tool" href="VAT.html">Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¶Ø§ÙØ©</a>
        <a class="tool" href="/articles/">Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª</a>
      </div>
    </section>

    <!-- Ø§Ù„Ø£Ø®Ø¨Ø§Ø±/Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª -->
    <section class="card" id="news-card" aria-labelledby="news-title">
      <div class="card__header">
        <h2 class="card__title" id="news-title">Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</h2>
        <a class="btn btn--ghost" href="news.html">Ø§Ù„Ù…Ø²ÙŠØ¯</a>
      </div>
      <ul class="list" id="articles-list"></ul>
    </section>
  </main>

  <!-- ØªØ°ÙŠÙŠÙ„ -->
  <footer class="footer">
    <div class="container--narrow">
      <p>Â© <span id="y"></span> Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</p>
      <nav class="footer__nav">
        <a href="privacy.html">Ø§Ù„Ø®ØµÙˆØµÙŠØ©</a>
        <a href="terms.html">Ø§Ù„Ø´Ø±ÙˆØ·</a>
        <a href="contact.html">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</a>
      </nav>
    </div>
  </footer>

  <!-- Ù…Ù„Ù Ø§Ù„Ø¥Ø¬Ø§Ø²Ø§Øª (Ù†ÙØ³ Ù…ØµØ¯Ø± Ø§Ù„Ù‚Ø¯ÙŠÙ…) -->
  <script src="/assets/holidays-data.js"></script>

  <!-- Ø³ÙƒØ±Ø¨ØªØ§Øª Ø§Ù„ØµÙØ­Ø©: Ù†ÙØ³ Ù…ØµØ§Ø¯Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ù‚Ø¯ÙŠÙ… -->
  <script>
    // Ø³Ù†Ø© Ø§Ù„Ø­Ù‚ÙˆÙ‚ + ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ
    document.getElementById('y').textContent = new Date().getFullYear();
    document.getElementById('themeToggle')?.addEventListener('click', () => {
      document.body.classList.toggle('dark');
    });

    // ============ Ø§Ù„Ø°Ù‡Ø¨: Ù†ÙØ³ Ù…ØµØ¯Ø± Ø§Ù„Ù‚Ø¯ÙŠÙ… (gold.json) ============
    async function loadGoldFromJson(){
      const el24 = document.getElementById('gold-24');
      const el22 = document.getElementById('gold-22');
      const upd  = document.getElementById('gold-updated');
      if(!el24 || !el22) return;

      try{
        const r = await fetch('gold.json', { cache:'no-store' });
        if(!r.ok) throw new Error('HTTP ' + r.status);
        const j = await r.json();

        const nf = new Intl.NumberFormat('ar-SA', { minimumFractionDigits:2, maximumFractionDigits:2 });

        let g24, g22;
        if (j.grams && (j.grams['24'] || j.grams[24])) {
          g24 = Number(j.grams['24'] ?? j.grams[24]);
          g22 = Number(j.grams['22'] ?? j.grams[22]) || (g24 * 22 / 24);
        } else {
          const ex = (j.exchange_rate != null) ? Number(j.exchange_rate) : 3.75;
          const ounceSar = (j.price_ounce_sar != null)
            ? Number(j.price_ounce_sar)
            : (j.price_ounce_usd != null ? Number(j.price_ounce_usd) * ex : null);
          if (ounceSar) {
            const perGram24 = ounceSar / 31.1035;
            g24 = perGram24; g22 = perGram24 * 22/24;
          }
        }

        if (!g24 || !g22) throw new Error('no data');

        el24.textContent = nf.format(g24);
        el22.textContent = nf.format(g22);
        if (upd) {
          const when =
            j.updated_at || j.last_updated || j.updatedAt ||
            new Date().toISOString();
          upd.textContent = when.replace('T',' ').slice(0,16);
        }
      }catch(e){
        console.error('gold json error', e);
        // (Ø§Ø®ØªÙŠØ§Ø±ÙŠ) fallback Ù„Ùˆ Ø£Ø±Ø¯Øª: Ù„ÙƒÙ†Ù†Ø§ Ù†Ù„ØªØ²Ù… Ø¨Ù…ØµØ¯Ø± Ø§Ù„Ù‚Ø¯ÙŠÙ…
      }
    }

    // ============ Ø§Ù„Ø¨Ù†Ø²ÙŠÙ†: Ø§Ù„Ù‚Ø¯ÙŠÙ… ÙƒØ§Ù† Ø«Ø§Ø¨Øª ============
    function fillFuelStatic(){
      const f95 = document.getElementById('fuel-95');
      const f91 = document.getElementById('fuel-91');
      if (f95) f95.textContent = '2.33';
      if (f91) f91.textContent = '2.18';
    }

    // ============ Ø§Ù„Ø·Ù‚Ø³: Ù†ÙØ³ Ù„ÙˆØ¬ÙŠÙƒ Ø§Ù„Ù‚Ø¯ÙŠÙ… (Open-Meteo + revgeo) ============
    (function miniWeather(){
      const cityEl = document.getElementById('wx-city');
      const descEl = document.getElementById('wx-desc');
      const tempEl = document.getElementById('wx-temp');

      const codeMap = {
        0:['ØµØ­Ùˆ','â˜€ï¸'],1:['ØµØ§ÙÙ ØºØ§Ù„Ø¨Ù‹Ø§','ğŸŒ¤ï¸'],2:['ØºØ§Ø¦Ù… Ø¬Ø²Ø¦ÙŠÙ‹Ø§','â›…'],3:['ØºØ§Ø¦Ù…','â˜ï¸'],
        45:['Ø¶Ø¨Ø§Ø¨','ğŸŒ«ï¸'],48:['Ø¶Ø¨Ø§Ø¨','ğŸŒ«ï¸'],51:['Ø±Ø°Ø§Ø° Ø®ÙÙŠÙ','ğŸŒ¦ï¸'],53:['Ø±Ø°Ø§Ø°','ğŸŒ¦ï¸'],55:['Ø±Ø°Ø§Ø° ÙƒØ«ÙŠÙ','ğŸŒ§ï¸'],
        61:['Ù…Ø·Ø± Ø®ÙÙŠÙ','ğŸŒ§ï¸'],63:['Ù…Ø·Ø±','ğŸŒ§ï¸'],65:['Ù…Ø·Ø± ØºØ²ÙŠØ±','ğŸŒ§ï¸'],
        66:['Ù…Ø·Ø± Ù…ØªØ¬Ù…Ø¯','ğŸŒ¨ï¸'],67:['Ù…Ø·Ø± Ù…ØªØ¬Ù…Ø¯','ğŸŒ¨ï¸'],71:['Ø«Ù„Ø¬ Ø®ÙÙŠÙ','â„ï¸'],73:['Ø«Ù„Ø¬','â„ï¸'],75:['Ø«Ù„Ø¬ ÙƒØ«ÙŠÙ','â„ï¸'],
        77:['Ø­Ø¨Ø§Øª Ø¬Ù„ÙŠØ¯','ğŸŒ¨ï¸'],80:['Ø²Ø®Ø§Øª Ø®ÙÙŠÙØ©','ğŸŒ¦ï¸'],81:['Ø²Ø®Ø§Øª','ğŸŒ§ï¸'],82:['Ø²Ø®Ø§Øª Ù‚ÙˆÙŠØ©','ğŸŒ§ï¸'],
        85:['Ø²Ø®Ø§Øª Ø«Ù„Ø¬','â„ï¸'],86:['Ø²Ø®Ø§Øª Ø«Ù„Ø¬ Ù‚ÙˆÙŠØ©','â„ï¸'],95:['Ø¹ÙˆØ§ØµÙ Ø±Ø¹Ø¯ÙŠØ©','â›ˆï¸'],96:['Ø¹ÙˆØ§ØµÙ Ù…Ø¹ Ø¨ÙØ±ÙØ¯','â›ˆï¸'],99:['Ø¹ÙˆØ§ØµÙ Ù…Ø¹ Ø¨ÙØ±ÙØ¯ ÙƒØ«ÙŠÙ','â›ˆï¸']
      };
      const wx = code => codeMap[code] ? codeMap[code][0] : 'Ø§Ù„Ø·Ù‚Ø³';

      async function reverseGeocode(lat, lon){
        try{
          const r = await fetch(`/.netlify/functions/revgeo?lat=${lat}&lon=${lon}&lang=ar`, { cache:'no-store' });
          if(!r.ok) return null;
          const j = await r.json();
          const g = j?.results?.[0];
          if(!g) return null;
          return [g.name, g.admin1 || g.country].filter(Boolean).join('ØŒ ');
        }catch{return null;}
      }

      async function load(lat, lon){
        try{
          const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&timezone=auto`, { cache:'no-store' });
          if(!res.ok) throw new Error('wx http ' + res.status);
          const data = await res.json();
          const cw = data.current_weather;
          if(!cw) throw new Error('no cw');
          tempEl.textContent = Math.round(cw.temperature);
          descEl.textContent = wx(cw.weathercode);

          const nice = await reverseGeocode(lat, lon);
          cityEl.textContent = nice || 'Ø§Ù„Ø±ÙŠØ§Ø¶ØŒ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©';
        }catch(e){
          console.warn('wx error', e);
          cityEl.textContent = 'Ø§Ù„Ø±ÙŠØ§Ø¶ØŒ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©';
          // Ø§Ø¸Ù‡Ø± Ø¯Ø±Ø¬Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ© ÙÙ‚Ø· Ø¥Ø°Ø§ Ø£Ø±Ø¯ØªØŒ Ù„ÙƒÙ† Ù†ØªØ±ÙƒÙ‡Ø§ â€” Ø­Ø³Ø¨ Ø§Ù„Ù‚Ø¯ÙŠÙ…
        }
      }

      // Ø­Ø§ÙˆÙ„ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù„Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©ØŒ ÙˆØ¥Ù„Ø§ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø±ÙŠØ§Ø¶
      const fallback = { lat: 24.7136, lon: 46.6753 };
      if (!navigator.geolocation) { load(fallback.lat, fallback.lon); return; }
      navigator.geolocation.getCurrentPosition(
        pos => load(pos.coords.latitude, pos.coords.longitude),
        ()  => load(fallback.lat, fallback.lon),
        { enableHighAccuracy:false, timeout:15000, maximumAge:600000 }
      );
    })();

    // ============ Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ©: Ù†ÙØ³ Ø§Ù„Ù€ Function Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ============
    (function loadCrypto(){
      const list = document.getElementById('crypto-list');
      if(!list) return;
      const COIN_IDS = 'bitcoin,ethereum,tether,solana,binancecoin,ripple';
      const nf = new Intl.NumberFormat('ar-SA', { minimumFractionDigits: 2, maximumFractionDigits: 2 });

      async function run(){
        list.innerHTML = '<li>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„â€¦</li>';
        try{
          const r = await fetch('/.netlify/functions/crypto?ids=' + encodeURIComponent(COIN_IDS), { cache: 'no-store' });
          if(!r.ok) throw new Error('HTTP ' + r.status);
          const arr = await r.json();
          list.innerHTML = '';
          arr.forEach(c => {
            const price = c.priceUSD ?? c.price ?? c.current_price;
            const ch    = c.change24h ?? c.changePercent24h ?? c.price_change_percentage_24h;
            const li = document.createElement('li');
            const chStr = (ch == null) ? '' : ((ch >= 0 ? 'â–² ' : 'â–¼ ') + nf.format(ch) + '%');
            li.innerHTML = `<strong>${(c.symbol || c.id || '').toString().toUpperCase()}</strong>: <b>${nf.format(price)}</b> USD <span style="opacity:.8">${chStr}</span>`;
            li.style.color = (ch ?? 0) >= 0 ? '#0a8f55' : '#c0392b';
            list.appendChild(li);
          });
        }catch(e){
          console.error(e);
          list.innerHTML = '<li>ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø¬Ù„Ø¨ Ø§Ù„Ø¢Ù†.</li>';
        }
      }
      run();
      setInterval(run, 15 * 60 * 1000);
    })();

    // ============ Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª: Ù†ÙØ³ Function Ø§Ù„Ù‚Ø¯ÙŠÙ… (saudi-matches) ============
    async function loadSaudiMatches(){
      const ul = document.getElementById('matches-list');
      if(!ul) return;
      ul.innerHTML = '<li>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„â€¦</li>';
      try{
        const qs = new URLSearchParams({ league: 'pro', limit: '4', type: 'both' }).toString();
        const r  = await fetch('/.netlify/functions/saudi-matches?' + qs, { cache: 'no-store' });
        if(!r.ok) throw new Error('HTTP ' + r.status);
        const data = await r.json();

        // Ù†Ø¹Ø±Ø¶ Ù…Ø¨Ø§Ø±Ø§ØªÙŠÙ† ÙÙ‚Ø· (Ø¢Ø®Ø± Ø§Ù„Ù…Ø§Ø¶ÙŠØ© + Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©)
        const rows = [];
        const past = Array.isArray(data.past) ? data.past.slice(0, 1) : [];
        const next = Array.isArray(data.next) ? data.next.slice(0, 1) : [];
        const picked = [...past, ...next];

        ul.innerHTML = '';
        if(!picked.length){ ul.innerHTML = '<li>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹.</li>'; return; }

        picked.forEach(m => {
          const haveScore = m.homeScore != null && m.awayScore != null;
          const when = m.date ? new Date(m.date).toLocaleString('ar-SA', { hour12:false }) : '';
          const li = document.createElement('li');
          li.className = 'match';
          li.innerHTML = `
            <div class="match__row">
              <span>${m.home}</span>
              <strong style="min-width:52px;text-align:center">${haveScore ? `${m.homeScore} - ${m.awayScore}` : 'VS'}</strong>
              <span>${m.away}</span>
            </div>
            <div class="match__meta muted">${when}</div>
          `;
          ul.appendChild(li);
        });
      }catch(e){
        console.error('matches error', e);
        ul.innerHTML = '<li>ØªØ¹Ø°Ù‘Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø§Ù„Ø¢Ù†.</li>';
      }
    }

    // ============ Ø§Ù„Ø¥Ø¬Ø§Ø²Ø§Øª: Ù†ÙØ³ Ù…Ù†Ø·Ù‚ Ø§Ù„Ù‚Ø¯ÙŠÙ… (assets/holidays-data.js) ============
    (function holidaysBox(){
      function fmtRange(s,e){
        const opt = { year:'numeric', month:'2-digit', day:'2-digit' };
        const a = new Date(s), b = new Date(e);
        const g = d => d.toLocaleDateString('ar-SA', opt);
        return (g(a) === g(b)) ? g(a) : (g(a) + ' â€” ' + g(b));
      }
      function leftDays(s){
        const ms = 86400000;
        const t = new Date(); t.setHours(0,0,0,0);
        const d = new Date(s); d.setHours(0,0,0,0);
        return Math.ceil((d - t) / ms);
      }
      function getUpcoming(list){
        const today = new Date(); today.setHours(0,0,0,0);
        return (list||[])
          .filter(h => new Date(h.end || h.start) >= today)
          .sort((a,b) => new Date(a.start) - new Date(b.start));
      }
      function render(){
        try{
          const data = window.HOLIDAYS || [];
          const upcoming = getUpcoming(data);
          const box = document.getElementById('next-holiday');
          const upd = document.getElementById('hol-updated');

          if (upd && window.HOLIDAYS_UPDATED_AT) {
            upd.textContent = new Date(window.HOLIDAYS_UPDATED_AT).toLocaleString('ar-SA', { hour12:false });
          }

          if (!upcoming.length){ box.textContent = 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø¬Ø§Ø²Ø§Øª Ù‚Ø±ÙŠØ¨Ø©.'; return; }
          const h = upcoming[0];
          const days = leftDays(h.start);
          const note = days > 0 ? `ØªØ¨Ù‚Ù‘Ù‰ ${days} ÙŠÙˆÙ…` : (days === 0 ? 'Ø§Ù„ÙŠÙˆÙ…' : '');
          box.innerHTML = `
            <div style="font-weight:700;line-height:1.4">${h.title}</div>
            <div class="muted" style="font-size:12px">${fmtRange(h.start, h.end)}${note ? ' â€¢ ' + note : ''}</div>
          `;
        }catch(e){
          console.error(e);
          const box = document.getElementById('next-holiday');
          if (box) box.textContent = 'ØªØ¹Ø°Ù‘Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¬Ø§Ø²Ø§Øª.';
        }
      }
      document.addEventListener('DOMContentLoaded', render);
    })();

    // ============ Ø§Ù„ØªØ±Ù†Ø¯Ø§Øª: Ù†ÙØ³ Function Ø§Ù„Ù‚Ø¯ÙŠÙ… (x-trends-cached) ============
    async function loadTrends(){
      const list = document.getElementById('x-trends');
      if(!list) return;
      list.innerHTML = '<li>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„â€¦</li>';
      try{
        const r = await fetch('/.netlify/functions/x-trends-cached?country=SA&limit=10', { cache: 'no-store' });
        if(!r.ok) throw new Error('HTTP ' + r.status);
        const data = await r.json();
        const arr  = Array.isArray(data) ? data : (data.trends || []);

        list.innerHTML = '';
        if (!arr.length){ list.innerHTML = '<li>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ø­Ø§Ù„ÙŠØ§Ù‹.</li>'; return; }

        arr.forEach((t, i) => {
          const raw = (t.name || '').trim();
          if(!raw) return;
          const label = raw.startsWith('#') ? raw : ('#' + raw);
          const aHref = (t.url && /^https?:\/\//i.test(t.url))
            ? t.url
            : 'https://x.com/search?q=' + encodeURIComponent(label);

          const li = document.createElement('li');
          li.innerHTML = `<a href="${aHref}" target="_blank" rel="noopener" class="hash-link">${i+1}. ${label.replace(/^#/,'')}</a>`;
          list.appendChild(li);
        });
      }catch(e){
        console.error('trends error', e);
        list.innerHTML = '<li>ØªØ¹Ø°Ù‘Ø± Ø¬Ù„Ø¨ Ø§Ù„ØªØ±Ù†Ø¯ Ø§Ù„Ø¢Ù†.</li>';
      }
    }

    // ============ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±: Ù†ÙØ³ Function Ø§Ù„Ù‚Ø¯ÙŠÙ… (news) ============
    async function loadNews(){
      const list = document.getElementById('articles-list');
      if(!list) return;
      list.innerHTML = '<li>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„â€¦</li>';
      try{
        const res = await fetch('/.netlify/functions/news?limit=4&sfw=1', { cache:'no-store' });
        if(!res.ok) throw new Error('news http ' + res.status);
        const data = await res.json();
        list.innerHTML = '';

        (data.items || []).forEach(item => {
          const time = item.pubDate ? new Date(item.pubDate).toLocaleString('ar-SA', { hour12: false }) : '';
          const li = document.createElement('li');
          li.innerHTML = `
            <a href="${item.link}" target="_blank" rel="noopener" style="text-decoration:none;color:inherit">
              <div class="news-title" style="font-weight:600;line-height:1.4">${item.title}</div>
              <div class="news-meta muted" style="font-size:12px">${item.source || ''}${time ? ' â€¢ ' + time : ''}</div>
            </a>
          `;
          list.appendChild(li);
        });
      }catch(e){
        console.error('news error', e);
        list.innerHTML = '<li>ØªØ¹Ø°Ù‘Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ø§Ù„Ø¢Ù†.</li>';
      }
    }

    // (Ø§Ø®ØªÙŠØ§Ø±ÙŠ Ø¥Ø±Ø´Ø§Ø¯ÙŠ) Ø£Ø³Ø¹Ø§Ø± Ø¹Ù…Ù„Ø§Øª ØªÙ‚Ù„ÙŠØ¯ÙŠØ© Ø¨Ø³ÙŠØ·Ø© â€” Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ØµØ¯Ø± ÙÙŠ Ø§Ù„Ù‚Ø¯ÙŠÙ…
    function fillFxAdvisory(){
      const ul = document.getElementById('fx-list');
      if(!ul) return;
      ul.innerHTML = `
        <li>USD / SAR: <b>3.75</b></li>
      `;
    }

    // ØªØ´ØºÙŠÙ„ ÙƒÙ„ Ø´ÙŠØ¡
    document.addEventListener('DOMContentLoaded', () => {
      fillFuelStatic();         // ÙˆÙ‚ÙˆØ¯ Ø«Ø§Ø¨Øª ÙƒÙ…Ø§ ÙÙŠ Ø§Ù„Ù‚Ø¯ÙŠÙ…
      loadGoldFromJson();       // Ø§Ù„Ø°Ù‡Ø¨ Ù…Ù† gold.json (Ù†ÙØ³ Ø§Ù„Ù‚Ø¯ÙŠÙ…)
      loadSaudiMatches();       // Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ù…Ù† Function Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
      loadTrends();             // ØªØ±Ù†Ø¯Ø§Øª X Ù…Ù† Function Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
      loadNews();               // Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ù…Ù† Function Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
      fillFxAdvisory();         // "Ø¥Ø±Ø´Ø§Ø¯ÙŠ" ÙÙ‚Ø·ØŒ Ù„Ø£Ù† Ø§Ù„Ù‚Ø¯ÙŠÙ… Ù„Ø§ ÙŠÙ…Ù„Ùƒ Ù…ØµØ¯Ø± Ø­Ù‚ÙŠÙ‚ÙŠ Ù„Ù‡Ø§
    });
  </script>
</body>
</html>
