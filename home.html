<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="google-adsense-account" content="ca-pub-6286972152122784">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>أسعار اليوم السعودية | الذهب، الوقود، الحاسبات</title>
  <meta name="description" content="موقع أسعار اليوم السعودية يوفر لك أحدث أسعار الذهب والوقود في السعودية، إلى جانب حاسبات ذكية مثل الزكاة والعمر وتحويل التاريخ." />
  <meta name="keywords" content="أسعار الذهب, أسعار الوقود, أسعار البنزين, حاسبة الزكاة, تحويل التاريخ, حاسبة العمر, السعودية, أسعار اليوم" />
  <meta name="author" content="أسعار اليوم السعودية" />

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-D8W8C8PYS9"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-D8W8C8PYS9');
  </script>

  <style>
    body {
      font-family: 'Tajawal', sans-serif;
      background-color: #f5f5f5;
      margin: 0;
      padding: 0;
      color: #333;
      transition: background 0.3s, color 0.3s;
    }

    .dark-mode {
      background-color: #121212;
      color: #e0e0e0;
    }

    .container {
      max-width: 900px;
      margin: auto;
      padding: 20px;
      text-align: center;
    }

    h1 {
      color: #006c35;
      margin-bottom: 10px;
      font-size: 26px;
    }

    .dark-mode h1 {
      color: #6ef19d;
    }

    p.description {
      font-size: 18px;
      color: #555;
      margin-bottom: 30px;
      line-height: 1.8;
    }

    .dark-mode p.description {
      color: #bbb;
    }

    .top-bar {
      text-align: left;
      padding: 10px 20px;
    }

    .toggle-btn {
      background: #006c35;
      color: white;
      border: none;
      border-radius: 20px;
      padding: 8px 15px;
      cursor: pointer;
      font-size: 14px;
    }

    .info-boxes {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      margin-bottom: 30px;
    }

    .info-box {
      flex: 1 1 300px;
      background-color: #ffffff;
      border: 2px solid #eeeeee;
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
      text-align: right;
    }

    .dark-mode .info-box {
      background-color: #1e1e1e;
      border-color: #444;
    }

    .info-box h3 {
      margin-top: 0;
      margin-bottom: 10px;
      color: #006c35;
    }

    .dark-mode .info-box h3 {
      color: #6ef19d;
    }

    .info-box ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .info-box li {
      padding: 5px 0;
      border-bottom: 1px solid #eee;
      font-size: 15px;
    }

    .dark-mode .info-box li {
      border-color: #444;
    }

    .buttons {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
    }

    .btn {
      flex: 1 1 250px;
      background-color: #fff;
      border: 2px solid #006c35;
      border-radius: 10px;
      text-decoration: none;
      color: #006c35;
      font-size: 18px;
      padding: 15px 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      transition: all 0.3s ease;
    }

    .btn:hover {
      background-color: #006c35;
      color: #fff;
      cursor: pointer;
    }

    .dark-mode .btn {
      background-color: #1e1e1e;
      color: #6ef19d;
      border-color: #6ef19d;
    }

    .dark-mode .btn:hover {
      background-color: #6ef19d;
      color: #000;
    }

    @media (max-width: 600px) {
      .btn {
        flex: 1 1 100%;
      }
    }
  </style>
</head>
<body>
  <div class="top-bar">
    <button class="toggle-btn" onclick="toggleDarkMode()">🌓 وضع ليلي</button>
  </div>

  <div class="container">
    <h1>📌 مرحبًا بك في موقع أسعار اليوم السعودية</h1>
    <p class="description">
      هنا ستجد أحدث أسعار <strong>الذهب</strong> و<strong>الوقود</strong> في السعودية، إضافة إلى أدوات مالية مفيدة مثل <strong>حاسبة الزكاة</strong> و<strong>حاسبة العمر</strong> و<strong>تحويل التاريخ</strong>. تم تصميم الموقع ليكون مرجعًا سهل الاستخدام ومفيدًا لكل من يهتم بالشؤون المالية اليومية في المملكة.
    </p>

    <!-- ✅ صندوق أسعار الذهب والديناميكية -->
    <div class="info-boxes">
  <div class="info-box">
    <h3>💰 أسعار الذهب</h3>
    <ul id="gold-prices">
      <li>جاري تحميل الأسعار...</li>
    </ul>
    <div style="text-align:left; margin-top:10px;">
      <a href="gold.html" class="btn" style="font-size:14px; padding:6px 10px;">مزيد ➝</a>
    </div>
  </div>

  <div class="info-box">
    <h3>⛽ أسعار الوقود</h3>
    <ul>
      <li>بنزين 91: 2.18 ريال</li>
      <li>بنزين 95: 2.33 ريال</li>
      <li>ديزل: 0.75 ريال</li>
    </ul>
    <div style="text-align:left; margin-top:10px;">
      <a href="fuel.html" class="btn" style="font-size:14px; padding:6px 10px;">مزيد ➝</a>
    </div>
  </div>
</div>

<!-- ====== Hashtags Card ====== -->
<style>
  .hashtags-card .row{display:flex;align-items:center;justify-content:space-between;padding:8px 0;border-bottom:1px solid rgba(0,0,0,.06)}
  .dark-mode .hashtags-card .row{border-bottom:1px solid rgba(255,255,255,.06)}
  .hashtags-list{list-style:none;margin:0;padding:0}
  .hashtags-list li{padding:6px 0;border-bottom:1px solid rgba(0,0,0,.06)}
  .dark-mode .hashtags-list li{border-bottom:1px solid rgba(255,255,255,.06)}
  .hash-link{color:#006c35;text-decoration:none;font-weight:700}
  .dark-mode .hash-link{color:#6ef19d}
  .muted{font-size:12px;opacity:.75}
</style>

<div class="card hashtags-card" dir="rtl" lang="ar" id="hashtags-card">
  <div class="weather-header" style="margin-bottom:8px">
    <div>
      <div class="weather-title">🔥 توب 10 هاشتاقات في السعودية</div>
      <div class="weather-meta">تحدّث تلقائيًا كل 5 دقائق</div>
    </div>
    <div class="salary-actions">
      <button class="salary-btn" id="goHashtags">مزيد</button>
    </div>
  </div>

  <ul class="hashtags-list" id="hashtags-list">
    <li class="muted">جاري جلب الهاشتاقات...</li>
  </ul>

  <div class="weather-meta">آخر تحديث: <span id="hashtags-updated">—</span></div>
</div>

<script>
(() => {
  const listEl = document.getElementById('hashtags-list');
  const updEl  = document.getElementById('hashtags-updated');

  function render(items){
    if (!items?.length){
      listEl.innerHTML = '<li class="muted">لا توجد بيانات حالياً</li>';
      return;
    }
    listEl.innerHTML = items.map((it, i) => {
      const num = (i+1).toString().padStart(2,'0');
      const href = it.url || `https://x.com/search?q=${encodeURIComponent(it.name)}`;
      const vol  = (it.volume && Number(it.volume)) ? ` — <span class="muted">${it.volume.toLocaleString()} تغريدة تقريبًا</span>` : '';
      return `<li><a class="hash-link" href="${href}" target="_blank" rel="noopener">#${it.name.replace(/^#+/,'')}</a>${vol}</li>`;
    }).join('');
  }

  async function load(){
    try{
      const r = await fetch('/.netlify/functions/ksa-trends', { cache: 'no-store' });
      if (!r.ok) throw new Error('fetch error ' + r.status);
      const j = await r.json();
      render(j.items);
      updEl.textContent = new Date().toLocaleString('ar-EG', {hour12:false});
    }catch(e){
      listEl.innerHTML = '<li class="muted">تعذّر جلب البيانات</li>';
    }
  }

  // زر المزيد -> صفحة خاصة بالترند (اعمل صفحة trends.html لاحقًا)
  document.getElementById('goHashtags').addEventListener('click', () => {
    window.location.href = 'trends.html';
  });

  load();
  setInterval(load, 5 * 60 * 1000); // كل 5 دقائق
})();
</script>


<!-- ====== Salaries Card (no API) ====== -->
<style>
  .salary-card .row{display:flex;align-items:center;justify-content:space-between;padding:8px 0;border-bottom:1px solid rgba(0,0,0,.06)}
  .dark-mode .salary-card .row{border-bottom:1px solid rgba(255,255,255,.06)}
  .salary-name{font-weight:700}
  .salary-date{font-size:13px;color:#666}
  .dark-mode .salary-date{color:#aaa}
  .salary-left{font-weight:700}
  .salary-actions{display:flex;gap:8px}
  .salary-btn{background:#006c35;color:#fff;border:none;border-radius:16px;padding:6px 10px;cursor:pointer}
  .salary-btn:hover{background:#008f4c}
</style>

<div class="card salary-card" dir="rtl" lang="ar">
  <div class="weather-header">
    <div>
      <div class="weather-title">الرواتب</div>
      <div class="weather-meta">أقرب موعدين للصرف</div>
    </div>
    <div class="salary-actions">
      <button class="salary-btn" id="goSalaries">عرض جدول الرواتب</button>
    </div>
  </div>

  <div class="row">
    <div>
      <div class="salary-name">موظفو الحكومة</div>
      <div class="salary-date" id="sal1-date">—</div>
    </div>
    <div class="salary-left" id="sal1-left">— يوم</div>
  </div>

  <div class="row" style="border-bottom:none;">
    <div>
      <div class="salary-name">المتقاعدون</div>
      <div class="salary-date" id="sal2-date">—</div>
    </div>
    <div class="salary-left" id="sal2-left">— يوم</div>
  </div>

  <div class="weather-meta">آخر تحديث: <span id="sal-updated">—</span></div>
</div>

<script>
(() => {
  // إعدادات الرواتب (يمكنك تعديل الأيام بسهولة لاحقًا)
  const GOV_DAY  = 27; // الموظفون الحكوميون: يوم 27 ميلادي
  const RET_DAY  = 25; // المتقاعدون: يوم 25 ميلادي

  const el = id => document.getElementById(id);
  const sal1Date = el('sal1-date'), sal1Left = el('sal1-left');
  const sal2Date = el('sal2-date'), sal2Left = el('sal2-left');
  const updEl = el('sal-updated');

  function nextPayday(dayOfMonth){
    const now = new Date();
    // تاريخ هذا الشهر في نفس اليوم
    const d = new Date(now.getFullYear(), now.getMonth(), dayOfMonth, 0, 0, 0);
    // إذا فات اليوم أو غير موجود (مثلاً فبراير 30)، انتقل للشهر القادم
    if (isNaN(d.getTime()) || d < startOfDay(now)) {
      const next = new Date(now.getFullYear(), now.getMonth()+1, dayOfMonth, 0, 0, 0);
      // معالجة لو كان اليوم غير موجود في الشهر القادم (نادراً لما نستخدم 25/27)
      return isNaN(next.getTime()) ? lastValidDayOfMonth(next.getFullYear(), next.getMonth()) : next;
    }
    return d;
  }

  function startOfDay(dt){
    return new Date(dt.getFullYear(), dt.getMonth(), dt.getDate(), 0, 0, 0);
  }

  function daysBetween(a, b){
    const ms = startOfDay(b) - startOfDay(a);
    return Math.max(0, Math.round(ms / 86400000)); // 1000*60*60*24
  }

  function lastValidDayOfMonth(year, monthIndex){
    // يرجع آخر يوم صالح في الشهر
    const last = new Date(year, monthIndex + 1, 0);
    return last;
  }

  function fmtDateAr(d){
    return d.toLocaleDateString('ar-EG', {
      weekday: 'long',
      year: 'numeric',
      month: 'long',
      day: 'numeric'
    });
  }

  function render(){
    const now = new Date();

    const gov = nextPayday(GOV_DAY);
    const ret = nextPayday(RET_DAY);

    sal1Date.textContent = fmtDateAr(gov) + ' (27 من كل شهر)';
    sal2Date.textContent = fmtDateAr(ret) + ' (25 من كل شهر)';

    sal1Left.textContent = daysBetween(now, gov) + ' يوم';
    sal2Left.textContent = daysBetween(now, ret) + ' يوم';

    updEl.textContent = now.toLocaleString('ar-EG', { hour12:false });
  }

  // زر الذهاب لصفحة الرواتب
  document.getElementById('goSalaries').addEventListener('click', () => {
    window.location.href = 'salaries.html'; // عدّل المسار حسب صفحتك
  });

  render();
})();
</script>


<!-- ====== Weather Card (no API key) ====== -->
<style>
  .card{border-radius:18px;background:#fff;box-shadow:0 6px 18px rgba(0,0,0,.06);padding:18px; margin-bottom:22px;}
  .dark-mode .card{background:#1c1c1c}
  .weather-card{display:flex;flex-direction:column;gap:10px}
  .weather-header{display:flex;justify-content:space-between;align-items:center}
  .weather-title{font-weight:700;color:#006c35}
  .dark-mode .weather-title{color:#6ef19d}
  .weather-meta{font-size:12px;color:#777}
  .dark-mode .weather-meta{color:#aaa}
  .weather-main{display:flex;align-items:center;gap:12px}
  .weather-icon{font-size:30px}
  .weather-temp{font-size:28px;font-weight:700}
  .weather-sub{display:flex;gap:10px;color:#555;font-size:13px}
  .dark-mode .weather-sub{color:#bbb}
  .weather-btn{background:#006c35;color:#fff;border:none;border-radius:16px;padding:6px 10px;cursor:pointer}
  .weather-btn:hover{background:#008f4c}
</style>

<div class="card weather-card" id="weather-card" dir="rtl" lang="ar">
  <div class="weather-header">
    <div>
      <div class="weather-title">الطقس الآن</div>
      <div class="weather-meta" id="weather-city">—</div> <!-- اسم المدينة -->
    </div>
    <div style="display:flex; gap:5px;">
      <button class="weather-btn" id="unitBtn" aria-label="تبديل وحدة القياس">°C</button>
      <button class="weather-btn" id="goWeather" aria-label="الذهاب لصفحة الطقس">صفحة الطقس</button>
    </div>
  </div>

  <div class="weather-main">
    <div class="weather-icon" id="weather-icon">⛅</div>
    <div>
      <div class="weather-temp"><span id="temp">--</span>°<span id="unit">C</span></div>
      <div class="weather-sub">
        <span id="desc">—</span>
        <span>•</span>
        <span>رياح: <span id="wind">--</span> كم/س</span>
      </div>
    </div>
  </div>

  <div class="weather-meta">آخر تحديث: <span id="wx-updated">—</span></div>
</div>

<script>
(() => {
  const el = id => document.getElementById(id);
  const cityEl = el('weather-city'), tempEl = el('temp'), unitEl = el('unit'),
        iconEl = el('weather-icon'), descEl = el('desc'), windEl = el('wind'), updEl = el('wx-updated'),
        unitBtn = el('unitBtn');

  // الحالة
  let useF = false;                  // هل نعرض فهرنهايت؟
  let coords = { lat: 24.7136, lon: 46.6753 }; // افتراضي: الرياض
  let lastTempC = null;              // نخزن الحرارة مئوية مرة واحدة
  let lastWind = null;               // نخزن سرعة الرياح (كم/س)
  let lastDesc = '—', lastIcon = '⛅';

  // خريطة أكواد الطقس لوصف/أيقونة
  const codeMap = {
    0:['صحو','☀️'],1:['صافٍ غالبًا','🌤️'],2:['غائم جزئيًا','⛅'],3:['غائم','☁️'],
    45:['ضباب','🌫️'],48:['ضباب','🌫️'],51:['رذاذ خفيف','🌦️'],53:['رذاذ','🌦️'],55:['رذاذ كثيف','🌧️'],
    61:['مطر خفيف','🌧️'],63:['مطر','🌧️'],65:['مطر غزير','🌧️'],
    66:['مطر متجمد','🌨️'],67:['مطر متجمد','🌨️'],71:['ثلج خفيف','❄️'],73:['ثلج','❄️'],75:['ثلج كثيف','❄️'],
    77:['حبات جليد','🌨️'],80:['زخات خفيفة','🌦️'],81:['زخات','🌧️'],82:['زخات قوية','🌧️'],
    85:['زخات ثلج','❄️'],86:['زخات ثلج قوية','❄️'],95:['عواصف رعدية','⛈️'],96:['عواصف مع بَرَد','⛈️'],99:['عواصف مع بَرَد كثيف','⛈️']
  };
  const wx = code => codeMap[code] || ['الطقس','🌡️'];

  // تنسيق العرض حسب الوحدة الحالية
  function updateDisplay() {
    if (lastTempC == null) return;
    const t = useF ? Math.round(lastTempC * 9/5 + 32) : Math.round(lastTempC);
    tempEl.textContent = t;
    unitEl.textContent = useF ? 'F' : 'C';
    unitBtn.textContent = useF ? '°C' : '°F'; // الزر يتبدّل أيضًا
    iconEl.textContent = lastIcon;
    descEl.textContent = lastDesc;
    if (lastWind != null) windEl.textContent = Math.round(lastWind);
    updEl.textContent = new Date().toLocaleString("ar-EG", { hour12:false });
  }

  async function reverseGeocode(lat, lon) {
    try {
      const r = await fetch(
        `https://geocoding-api.open-meteo.com/v1/reverse?latitude=${lat}&longitude=${lon}&language=ar`,
        { cache: 'no-store' }
      );
      const j = await r.json();
      const g = j?.results?.[0];
      if (!g) return 'الموقع';
      const parts = [g.name, g.admin1 || g.country].filter(Boolean);
      return parts.join('، ');
    } catch {
      return 'الموقع';
    }
  }

  async function load(lat, lon) {
    const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&timezone=auto`;
    const res = await fetch(url, { cache: 'no-store' });
    const data = await res.json();
    const cw = data.current_weather;
    if (!cw) throw new Error('No current weather');

    const [d, ic] = wx(cw.weathercode);
    lastDesc = d;
    lastIcon = ic;
    lastWind = cw.windspeed;
    lastTempC = cw.temperature;

    updateDisplay();
    cityEl.textContent = await reverseGeocode(lat, lon);
  }

  unitBtn.addEventListener('click', () => {
    useF = !useF;
    updateDisplay();
  });

  // زر الذهاب لصفحة الطقس
  document.getElementById('goWeather').addEventListener('click', () => {
    window.location.href = 'weather.html'; // عدل المسار حسب موقع صفحتك
  });

  function start(lat, lon){
    coords = {lat, lon};
    load(lat, lon).catch(() => { 
      cityEl.textContent='تعذّر جلب البيانات';
    });
  }

  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(
      pos => start(pos.coords.latitude, pos.coords.longitude),
      ()  => start(coords.lat, coords.lon)
    );
  } else {
    start(coords.lat, coords.lon);
  }
})();
</script>


    
    <div class="buttons">
      <a href="gold.html" class="btn">💰 أسعار الذهب</a>
      <a href="fuel.html" class="btn">⛽ أسعار الوقود</a>
      <a href="zakat.html" class="btn">🧮 حاسبة الزكاة</a>
      <a href="age.html" class="btn">🎂 حاسبة العمر</a>
      <a href="history.html" class="btn">📅 تحويل بين الهجري والميلادي</a>
      <a href="VAT.html" class="btn">💸 ضريبة القيمة المضافة</a>
      <a href="retirement.html" class="btn">🏦 حاسبة التقاعد</a>
    </div>

    <!-- ✅ روابط السياسة والتواصل -->
    <div class="buttons" style="margin-top: 30px;">
      <a href="privacy.html" class="btn">🔐 سياسة الخصوصية</a>
      <a href="terms.html" class="btn">📜 شروط الاستخدام</a>
      <a href="contact.html" class="btn">📬 تواصل معنا</a>
    </div>
  </div>

  <script>
    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
    }

    async function fetchGoldPrices() {
      try {
        const response = await fetch("gold.json");
        const data = await response.json();

        const pricePerOunceUsd = data.price_ounce_usd;
        const usdToSar = 3.75;
        const pricePerGramSar = (pricePerOunceUsd / 31.1035) * usdToSar;

        const gram24 = (pricePerGramSar * 1).toFixed(2);
        const gram21 = (pricePerGramSar * (21 / 24)).toFixed(2);
        const gram18 = (pricePerGramSar * (18 / 24)).toFixed(2);

        document.getElementById('gold-prices').innerHTML = `
          <li>عيار 24: ${gram24} ريال</li>
          <li>عيار 21: ${gram21} ريال</li>
          <li>عيار 18: ${gram18} ريال</li>
        `;
      } catch (err) {
        document.getElementById('gold-prices').innerHTML = `<li>تعذر تحميل الأسعار</li>`;
      }
    }

    fetchGoldPrices();
  </script>
</body>
</html>
