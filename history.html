<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø¨ÙŠÙ† Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ ÙˆØ§Ù„Ù‡Ø¬Ø±ÙŠ</title>
  <meta name="description" content="Ø£Ø¯Ø§Ø© Ù…Ø¬Ø§Ù†ÙŠØ© Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø¨ÙŠÙ† Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ ÙˆØ§Ù„Ù‡Ø¬Ø±ÙŠ Ø¨Ø¯Ù‚Ø© ÙˆØ³Ù‡ÙˆÙ„Ø©.">
  <meta name="keywords" content="ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØªØ§Ø±ÙŠØ®, Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ, Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ, Ù‡Ø¬Ø±ÙŠ Ø¥Ù„Ù‰ Ù…ÙŠÙ„Ø§Ø¯ÙŠ, Ù…ÙŠÙ„Ø§Ø¯ÙŠ Ø¥Ù„Ù‰ Ù‡Ø¬Ø±ÙŠ">
  <link href="https://fonts.googleapis.com/css2?family=Tajawal&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f4f4f4; --card:#fff; --text:#333; --muted:#777; --primary:#006c35; --primary-hover:#004f27;
      --border:rgba(0,0,0,.1);
    }
    body.dark{
      --bg:#111; --card:#1b1b1b; --text:#e6e6e6; --muted:#b3b3b3; --primary:#1fa466; --primary-hover:#169056;
      --border:rgba(255,255,255,.1);
    }

    body {
      font-family: 'Tajawal', sans-serif;
      margin: 0;
      padding: 0;
      background: var(--bg);
      color: var(--text);
      transition: background .2s ease, color .2s ease;
    }

    header {
      background: var(--primary);
      color: white;
      padding: 15px;
      text-align: center;
      font-size: 24px;
    }

    .top-buttons {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin: 10px 0;
    }

    .top-buttons button {
      background-color: var(--primary);
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 10px;
      cursor: pointer;
    }
    .top-buttons button:hover{ background: var(--primary-hover); }

    .container {
      max-width: 700px;
      margin: 20px auto;
      background: var(--card);
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 0 10px var(--border);
      transition: background .2s ease;
    }

    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }

    select, input {
      padding: 10px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 8px;
      width: 100%;
      margin-bottom: 20px;
      background: inherit;
      color: inherit;
    }
    body.dark select, body.dark input{ border-color:#444; }

    .convert-group {
      display: flex;
      gap: 10px;
    }

    .convert-group select {
      flex: 1;
    }

    button.convert-btn {
      background-color: var(--primary);
      color: white;
      border: none;
      padding: 12px;
      font-size: 16px;
      border-radius: 10px;
      cursor: pointer;
      width: 100%;
    }

    button.convert-btn:hover {
      background-color: var(--primary-hover);
    }

    .result {
      font-size: 18px;
      text-align: center;
      margin-top: 20px;
    }

    .footer {
      text-align: center;
      margin-top: 30px;
      font-size: 14px;
      color: var(--muted);
    }
  </style>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-D8W8C8PYS9"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date()); gtag('config', 'G-D8W8C8PYS9');
  </script>
</head>
<body>

  <header>ğŸ“… ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø¨ÙŠÙ† Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ ÙˆØ§Ù„Ù‡Ø¬Ø±ÙŠ</header>

  <div class="top-buttons">
    <button id="darkBtn" onclick="toggleDarkMode()">ğŸŒ™ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ</button>
    <button onclick="window.location.href='home.html'">ğŸ  Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
  </div>

  <div class="container">
    <label for="direction">Ø§ØªØ¬Ø§Ù‡ Ø§Ù„ØªØ­ÙˆÙŠÙ„:</label>
    <select id="direction" onchange="toggleDateInputs()">
      <option value="gregorian-to-hijri">Ù…Ù† Ù…ÙŠÙ„Ø§Ø¯ÙŠ Ø¥Ù„Ù‰ Ù‡Ø¬Ø±ÙŠ</option>
      <option value="hijri-to-gregorian">Ù…Ù† Ù‡Ø¬Ø±ÙŠ Ø¥Ù„Ù‰ Ù…ÙŠÙ„Ø§Ø¯ÙŠ</option>
    </select>

    <!-- --- Ù…ÙŠÙ„Ø§Ø¯ÙŠ: ÙŠÙˆÙ…/Ø´Ù‡Ø±/Ø³Ù†Ø© --- -->
    <div id="gregorian-input">
      <label>Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ:</label>
      <div class="convert-group">
        <select id="g-day"><option value="">Ø§Ù„ÙŠÙˆÙ…</option></select>
        <select id="g-month"><option value="">Ø§Ù„Ø´Ù‡Ø±</option></select>
        <select id="g-year"><option value="">Ø§Ù„Ø³Ù†Ø©</option></select>
      </div>
    </div>

    <!-- --- Ù‡Ø¬Ø±ÙŠ: ÙŠÙˆÙ…/Ø´Ù‡Ø±/Ø³Ù†Ø© --- -->
    <div id="hijri-input" style="display: none;">
      <label>Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ:</label>
      <div class="convert-group">
        <select id="hijri-day"><option value="">Ø§Ù„ÙŠÙˆÙ…</option></select>
        <select id="hijri-month"><option value="">Ø§Ù„Ø´Ù‡Ø±</option></select>
        <select id="hijri-year"><option value="">Ø§Ù„Ø³Ù†Ø©</option></select>
      </div>
    </div>

    <button class="convert-btn" onclick="convertDate()">ğŸ“… ØªØ­ÙˆÙŠÙ„</button>

    <div class="result" id="result">-</div>
    <div class="footer">Ù…Ù„Ø­ÙˆØ¸Ø©: ØµÙŠØºØ© ÙˆØ§Ø¬Ù‡Ø© Aladhan ØªØªØ·Ù„Ø¨ DD-MM-YYYY.</div>
  </div>

  <script>
    // ======== Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ Ù…Ø¹ Ø­ÙØ¸ Ø§Ù„ØªÙØ¶ÙŠÙ„ ========
    function applyDarkPref(){
      const pref = localStorage.getItem('pref-dark');
      if (pref === '1') document.body.classList.add('dark');
      document.getElementById('darkBtn').textContent =
        document.body.classList.contains('dark') ? 'â˜€ï¸ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­' : 'ğŸŒ™ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ';
    }
    function toggleDarkMode() {
      document.body.classList.toggle('dark');
      localStorage.setItem('pref-dark', document.body.classList.contains('dark') ? '1' : '0');
      applyDarkPref();
    }

    // ======== ØªÙ‡ÙŠØ¦Ø© Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ ========
    const gDay = document.getElementById('g-day');
    const gMonth = document.getElementById('g-month');
    const gYear = document.getElementById('g-year');

    const gMonths = [
      'ÙŠÙ†Ø§ÙŠØ±','ÙØ¨Ø±Ø§ÙŠØ±','Ù…Ø§Ø±Ø³','Ø£Ø¨Ø±ÙŠÙ„','Ù…Ø§ÙŠÙˆ','ÙŠÙˆÙ†ÙŠÙˆ',
      'ÙŠÙˆÙ„ÙŠÙˆ','Ø£ØºØ³Ø·Ø³','Ø³Ø¨ØªÙ…Ø¨Ø±','Ø£ÙƒØªÙˆØ¨Ø±','Ù†ÙˆÙÙ…Ø¨Ø±','Ø¯ÙŠØ³Ù…Ø¨Ø±'
    ];

    function isLeap(y){ return (y%4===0 && y%100!==0) || (y%400===0); }
    function daysInMonth(y, mIndex){ // mIndex: 0..11
      const base = [31, (isLeap(y)?29:28), 31,30,31,30,31,31,30,31,30,31];
      return base[mIndex] || 30;
    }

    function fillGregorian() {
      // Ø£Ø´Ù‡Ø±
      for (let i=0;i<12;i++){
        const opt=document.createElement('option');
        opt.value=i+1; opt.textContent=gMonths[i];
        gMonth.appendChild(opt);
      }
      // Ø³Ù†ÙˆØ§Øª (1960 -> 2100)
      for (let y=1960; y<=2100; y++){
        const opt=document.createElement('option');
        opt.value=y; opt.textContent=y;
        gYear.appendChild(opt);
      }

      // Ø­Ø¯Ù‘Ø« Ø§Ù„Ø£ÙŠØ§Ù… Ø­Ø³Ø¨ Ø§Ù„Ø´Ù‡Ø±/Ø§Ù„Ø³Ù†Ø©
      function refreshDays(){
        const y = parseInt(gYear.value,10);
        const m = parseInt(gMonth.value,10);
        const max = (!isNaN(y) && !isNaN(m)) ? daysInMonth(y, m-1) : 31;
        // Ø£Ø¹Ø¯ Ø§Ù„Ø¨Ù†Ø§Ø¡
        const sel = gDay.value;
        gDay.innerHTML = '<option value="">Ø§Ù„ÙŠÙˆÙ…</option>';
        for (let d=1; d<=max; d++){
          const opt=document.createElement('option');
          opt.value=d; opt.textContent=d;
          gDay.appendChild(opt);
        }
        if (sel && sel<=max) gDay.value = sel;
      }
      gMonth.addEventListener('change', refreshDays);
      gYear.addEventListener('change', refreshDays);

      // Ù‚ÙŠÙÙ… Ø§ÙØªØ±Ø§Ø¶ÙŠØ© (Ø§Ù„ÙŠÙˆÙ…)
      const now = new Date();
      gYear.value = now.getFullYear();
      gMonth.value = now.getMonth()+1;
      refreshDays();
      gDay.value = now.getDate();
    }

    // ======== ØªÙ‡ÙŠØ¦Ø© Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ù‡Ø¬Ø±ÙŠ ========
    const hDay = document.getElementById('hijri-day');
    const hMonth = document.getElementById('hijri-month');
    const hYear = document.getElementById('hijri-year');
    const hMonths = ["Ù…Ø­Ø±Ù…","ØµÙØ±","Ø±Ø¨ÙŠØ¹ Ø£ÙˆÙ„","Ø±Ø¨ÙŠØ¹ Ø«Ø§Ù†ÙŠ","Ø¬Ù…Ø§Ø¯Ù‰ Ø£ÙˆÙ„Ù‰","Ø¬Ù…Ø§Ø¯Ù‰ Ø«Ø§Ù†ÙŠØ©","Ø±Ø¬Ø¨","Ø´Ø¹Ø¨Ø§Ù†","Ø±Ù…Ø¶Ø§Ù†","Ø´ÙˆØ§Ù„","Ø°Ùˆ Ø§Ù„Ù‚Ø¹Ø¯Ø©","Ø°Ùˆ Ø§Ù„Ø­Ø¬Ø©"];

    function populateHijriOptions() {
      for (let i = 1; i <= 30; i++) {
        const opt = document.createElement('option');
        opt.value = i; opt.textContent = i;
        hDay.appendChild(opt);
      }
      for (let i = 1; i <= 12; i++) {
        const opt = document.createElement('option');
        opt.value = i; opt.textContent = hMonths[i - 1];
        hMonth.appendChild(opt);
      }
      for (let i = 1400; i <= 1500; i++) {
        const opt = document.createElement('option');
        opt.value = i; opt.textContent = i;
        hYear.appendChild(opt);
      }
    }

    // ======== Ø¹Ø±Ø¶/Ø¥Ø®ÙØ§Ø¡ Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ ========
    function toggleDateInputs() {
      const direction = document.getElementById('direction').value;
      document.getElementById('gregorian-input').style.display = direction === 'gregorian-to-hijri' ? 'block' : 'none';
      document.getElementById('hijri-input').style.display     = direction === 'hijri-to-gregorian' ? 'block' : 'none';
      document.getElementById('result').textContent = '-';
    }

    // ======== Ø§Ù„ØªØ­ÙˆÙŠÙ„ ========
    async function convertDate() {
      const direction = document.getElementById('direction').value;
      const resultDiv = document.getElementById('result');

      try {
        if (direction === 'gregorian-to-hijri') {
          const d = gDay.value, m = gMonth.value, y = gYear.value;
          if (!d || !m || !y) return resultDiv.textContent = 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„';
          const dateStr = String(d).padStart(2,'0') + '-' + String(m).padStart(2,'0') + '-' + y; // DD-MM-YYYY
          const res = await fetch(`https://api.aladhan.com/v1/gToH?date=${dateStr}`);
          const data = await res.json();
          if (!data || !data.data || !data.data.hijri) throw new Error('ØªØ¹Ø°Ø± Ø§Ù„ØªØ­ÙˆÙŠÙ„');
          const hj = data.data.hijri; // { date: 'DD-...-YYYY', weekday:..., month:... }
          resultDiv.textContent = `ğŸ“† Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ: ${hj.date} â€” ${hj.weekday.ar}ØŒ ${hj.month.ar} ${hj.day}`;
        } else {
          const d = hDay.value, m = hMonth.value, y = hYear.value;
          if (!d || !m || !y) return resultDiv.textContent = 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„';
          const dateStr = String(d).padStart(2,'0') + '-' + String(m).padStart(2,'0') + '-' + y; // DD-MM-YYYY
          const res = await fetch(`https://api.aladhan.com/v1/hToG?date=${dateStr}`);
          const data = await res.json();
          if (!data || !data.data || !data.data.gregorian) throw new Error('ØªØ¹Ø°Ø± Ø§Ù„ØªØ­ÙˆÙŠÙ„');
          const gr = data.data.gregorian;
          resultDiv.textContent = `ğŸ“† Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ: ${gr.date} â€” ${gr.weekday.en}, ${gr.month.en} ${gr.day}`;
        }
      } catch (e) {
        resultDiv.textContent = 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­ÙˆÙŠÙ„. ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª ÙˆØ­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.';
        console.error(e);
      }
    }

    // ======== ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø© ========
    populateHijriOptions();
    fillGregorian();
    applyDarkPref();
    toggleDateInputs(); // Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ©

    // Ø¥ØªØ§Ø­Ø© Ø§Ù„Ø¯ÙˆØ§Ù„ Ù„Ù„Ø¹Ù†Ø§ØµØ±
    window.toggleDateInputs = toggleDateInputs;
    window.convertDate = convertDate;
    window.toggleDarkMode = toggleDarkMode;
  </script>
</body>
</html>
