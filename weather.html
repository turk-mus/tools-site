<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ø§Ù„Ø·Ù‚Ø³ ÙÙŠ Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</title>

  <!-- Ø³ØªØ§ÙŠÙ„ Ù…ÙˆÙ‚Ø¹Ùƒ Ø§Ù„Ø¹Ø§Ù… (ÙŠØ¸Ù„ Ø´ØºØ§Ù„ Ù„ÙƒÙ† Ù„Ù† ÙŠØªØ¹Ø§Ø±Ø¶) -->
  <link rel="stylesheet" href="styles.css">

  <!-- ADDED: AdSense (Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ©) -->
  <meta name="google-adsense-account" content="ca-pub-6286972152122784"><!-- ADDED -->
  <script async crossorigin="anonymous" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6286972152122784"></script><!-- ADDED -->

  <!-- ADDED: SEO Ø£Ø³Ø§Ø³ÙŠ -->
  <link rel="canonical" href="https://as3aralywm.com/weather"><!-- ADDED -->
  <meta name="description" content="Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù‚Ø³ Ø§Ù„Ø¢Ù† ÙÙŠ Ù…Ù†Ø§Ø·Ù‚ ÙˆÙ…Ø¯Ù† Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© Ù…Ø¹ Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø© ÙˆÙˆØµÙ Ø§Ù„Ø­Ø§Ù„Ø© Ù„ÙƒÙ„ Ù…Ø¯ÙŠÙ†Ø©."><!-- ADDED -->
  <meta name="format-detection" content="telephone=no"><!-- ADDED -->
  <meta name="theme-color" content="#0f172a"><!-- ADDED -->
  <meta property="og:type" content="website"><!-- ADDED -->
  <meta property="og:locale" content="ar_SA"><!-- ADDED -->
  <meta property="og:title" content="Ø§Ù„Ø·Ù‚Ø³ ÙÙŠ Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ù…Ù…Ù„ÙƒØ© â€” Ø¯Ø±Ø¬Ø§Øª Ø§Ù„Ø­Ø±Ø§Ø±Ø© Ø§Ù„Ø¢Ù†"><!-- ADDED -->
  <meta property="og:description" content="ØªØµÙØ­ Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù‚Ø³ ÙÙŠ Ø¬Ù…ÙŠØ¹ Ù…Ù†Ø§Ø·Ù‚ ÙˆÙ…Ø¯Ù† Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© Ù…Ø¹ ØªØ­Ø¯ÙŠØ« Ù…Ø¨Ø§Ø´Ø± Ù…Ù† Open-Meteo."><!-- ADDED -->
  <meta property="og:url" content="https://as3aralywm.com/weather"><!-- ADDED -->
  <meta property="og:image" content="/assets/og-cover.jpg"><!-- ADDED -->
  <meta name="twitter:card" content="summary_large_image"><!-- ADDED -->

  <style>
    /* ====== Weather App Namespace ====== */
    #wx-app { --bg:#0f172a; --text:#e5e7eb; --muted:#9ca3af; --card:#111827; --border:#374151; --accent:#4ade80; }
    #wx-app, #wx-app * { box-sizing: border-box; }
    #wx-app { background:var(--bg); color:var(--text); min-height:100dvh; }

    #wx-app .wx-container { max-width:1200px; margin-inline:auto; padding:20px; }
    #wx-app h1 { font-size:28px; margin:0 0 8px; }
    #wx-app .wx-sub { color:var(--muted); margin-bottom:18px; }

    #wx-app .wx-toolbar { display:flex; gap:10px; flex-wrap:wrap; margin-bottom:16px; }
    #wx-app .wx-search { flex:1; min-width:260px; }
    #wx-app .wx-input {
      width:100%; padding:10px 12px; border-radius:10px; border:1px solid var(--border);
      background:var(--card); color:var(--text);
    }
    #wx-app .wx-btn {
      padding:10px 14px; border-radius:10px; border:1px solid var(--border);
      background:var(--card); color:var(--text); cursor:pointer;
    }
    #wx-app .wx-btn:hover { border-color:#4b5563; }

    #wx-app .wx-region { background:var(--card); border:1px solid var(--border); border-radius:14px; margin-bottom:12px; overflow:hidden; }
    #wx-app .wx-region-h {
      display:flex; align-items:center; gap:10px; justify-content:space-between; padding:14px 16px; cursor:pointer;
    }
    #wx-app .wx-region-title { font-weight:800; }
    #wx-app .wx-count { color:var(--muted); font-size:14px; }
    #wx-app .wx-chev { transition:.15s; }
    #wx-app .wx-region.wx-open .wx-chev { transform:rotate(180deg); }

    #wx-app .wx-cities { display:none; border-top:1px solid var(--border); padding:14px; }
    #wx-app .wx-region.wx-open .wx-cities { display:block; }

    #wx-app .wx-cities-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(220px,1fr)); gap:12px; }

    #wx-app .wx-card {
      background:#0f172a; border:1px solid var(--border); border-radius:12px;
      padding:12px; display:flex; gap:10px; align-items:center; transition:.15s;
    }
    #wx-app .wx-card:hover { transform:translateY(-2px); box-shadow:0 10px 18px rgba(0,0,0,.18); }

    #wx-app .wx-city { font-weight:700; }
    #wx-app .wx-muted { color:var(--muted); font-size:14px; }
    #wx-app .wx-emoji { font-size:28px; }

    #wx-app .wx-skeleton{background:linear-gradient(90deg,#0b1222 25%,#10192f 37%,#0b1222 63%);background-size:400% 100%;animation:wxs 1.2s ease-in-out infinite}
    @keyframes wxs{0%{background-position:100% 50%}100%{background-position:0 50%}}

    #wx-app .wx-footer { margin-top:20px; color:var(--muted); font-size:12px; }
    #wx-app a { color:var(--accent); text-decoration:none; }
    #wx-app a:hover { text-decoration:underline; }

    /* Ù…Ù†Ø¹ Ø£ÙŠ Grid/Sidebar Ø¹Ø§Ù… Ù…Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙŠØ®Ø±Ù‘Ø¨ Ø§Ù„Ø¹Ø±Ø¶ Ø¯Ø§Ø®Ù„ ØµÙØ­Ø© Ø§Ù„Ø·Ù‚Ø³ */
    #wx-app { display:block; width:100%; }
  </style>

  <!-- (Ø§Ø®ØªÙŠØ§Ø±ÙŠ) Google Analytics Ù…Ø«Ù„ Ø¨Ø§Ù‚ÙŠ Ø§Ù„ØµÙØ­Ø§Øª -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-D8W8C8PYS9"></script>
  <script>
    window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}
    gtag('js', new Date()); gtag('config','G-D8W8C8PYS9');
  </script>

  <!-- ADDED: Structured Data Ù„Ø±ÙØ¹ Ø¬ÙˆØ¯Ø© Ø§Ù„ØµÙØ­Ø© -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"Article",
    "headline":"Ø§Ù„Ø·Ù‚Ø³ ÙÙŠ Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©",
    "inLanguage":"ar",
    "author":{"@type":"Organization","name":"Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©"},
    "publisher":{"@type":"Organization","name":"Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©"},
    "mainEntityOfPage":{"@type":"WebPage","@id":"https://as3aralywm.com/weather"}
  }
  </script>
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"FAQPage",
    "mainEntity":[
      {"@type":"Question","name":"Ù…Ù† Ø£ÙŠÙ† Ù†Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù‚Ø³ØŸ","acceptedAnswer":{"@type":"Answer","text":"Ù†Ø³ØªØ®Ø¯Ù… ÙˆØ§Ø¬Ù‡Ø© Open-Meteo Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø·Ù‚Ø³ Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„ÙƒÙ„ Ù…Ø¯ÙŠÙ†Ø©."}},
      {"@type":"Question","name":"Ù‡Ù„ Ø§Ù„Ø²Ù…Ù† ÙˆØ§Ù„ØªÙˆÙ‚ÙŠØª Ù…Ø­Ù„ÙŠØŸ","acceptedAnswer":{"@type":"Answer","text":"Ù†Ø³ØªØ®Ø¯Ù… timezone=auto Ù…Ù† Open-Meteo Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù‚ÙŠÙ… Ø­Ø³Ø¨ Ø§Ù„ØªÙˆÙ‚ÙŠØª Ø§Ù„Ù…Ø­Ù„ÙŠ Ù‚Ø¯Ø± Ø§Ù„Ø¥Ù…ÙƒØ§Ù†."}},
      {"@type":"Question","name":"Ù„Ù…Ø§Ø°Ø§ ØªØ®ØªÙ„Ù Ø§Ù„Ø­Ø§Ù„Ø© Ø¨ÙŠÙ† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§ØªØŸ","acceptedAnswer":{"@type":"Answer","text":"ØªØ®ØªÙ„Ù Ù…ØµØ§Ø¯Ø± Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ ÙˆØ§Ù„Ø±ØµØ¯ Ø¨ÙŠÙ† Ø§Ù„Ø®Ø¯Ù…Ø§ØªØ› Ù†Ø¹Ø±Ø¶ ÙˆØµÙÙ‹Ø§ Ø¹Ø§Ù…Ù‘Ù‹Ø§ ÙˆØ¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©."}}
    ]
  }
  </script>
</head>
<body>
  <div id="wx-app" dir="rtl" lang="ar">
    <div class="wx-container">
      <h1>Ø§Ù„Ø·Ù‚Ø³ ÙÙŠ Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ù…Ù…Ù„ÙƒØ©</h1>
      <div class="wx-sub">Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ù„Ø¹Ø±Ø¶ Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù‚Ø³ ÙÙŠ Ù…Ø¯Ù†Ù‡Ø§ ÙˆÙ…Ø­Ø§ÙØ¸Ø§ØªÙ‡Ø§.</div>

      <div class="wx-toolbar">
        <div class="wx-search"><input id="wx-q" class="wx-input" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ù…Ø¯ÙŠÙ†Ø© Ø£Ùˆ Ù…Ø­Ø§ÙØ¸Ø©â€¦" /></div>
        <button id="wx-expandAll" class="wx-btn">ÙØªØ­ Ø§Ù„ÙƒÙ„</button>
        <button id="wx-collapseAll" class="wx-btn">Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ÙƒÙ„</button>
      </div>

      <!-- ADDED: Ù‚Ø³Ù… ØªØ­Ù„ÙŠÙ„ÙŠ Ø¨Ø³ÙŠØ· Ù„Ø²ÙŠØ§Ø¯Ø© Ù‚ÙŠÙ…Ø© Ø§Ù„ØµÙØ­Ø© -->
      <section class="wx-region" style="padding:12px;border-radius:14px"><!-- ADDED -->
        <div class="wx-region-h" style="cursor:default" aria-hidden="true"><!-- ADDED -->
          <div class="wx-region-title">Ù…Ù„Ø®Øµ Ø³Ø±ÙŠØ¹</div><!-- ADDED -->
        </div><!-- ADDED -->
        <div class="wx-cities" style="display:block;padding:12px"><!-- ADDED -->
          <p class="wx-muted" style="margin:0">ØªØ®ØªÙ„Ù Ø§Ù„Ø£Ø­ÙˆØ§Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø³ÙˆØ§Ø­Ù„ (Ø¬Ø¯Ø©/ÙŠÙ†Ø¨Ø¹) ÙˆØ§Ù„Ø¯Ø§Ø®Ù„ (Ø§Ù„Ø±ÙŠØ§Ø¶/Ø­Ø§Ø¦Ù„) ÙˆØ§Ù„Ù…Ø±ØªÙØ¹Ø§Øª (Ø£Ø¨Ù‡Ø§/Ø§Ù„Ù†Ù…Ø§Øµ). Ø±Ø§Ù‚Ø¨ Ø±Ù…ÙˆØ² Ø§Ù„Ø­Ø§Ù„Ø© ÙˆØ§Ù„Ø­Ø±Ø§Ø±Ø© Ø§Ù„Ù…Ø°ÙƒÙˆØ±Ø© Ù„ÙƒÙ„ Ù…Ø¯ÙŠÙ†Ø©.</p><!-- ADDED -->
        </div><!-- ADDED -->
      </section><!-- ADDED -->

      <div id="wx-regions"></div>

      <div class="wx-footer">Ø§Ù„Ù…ØµØ¯Ø±: <a href="https://open-meteo.com/" target="_blank" rel="noopener">Open-Meteo</a></div>
    </div>
  </div>

  <noscript><!-- ADDED -->
    <div style="max-width:1200px;margin:12px auto;color:#555;padding:12px">
      ØªØ­ØªØ§Ø¬ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© Ø¥Ù„Ù‰ ØªÙ…ÙƒÙŠÙ† JavaScript Ù„Ø¬Ù„Ø¨ Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù‚Ø³ Ù„ÙƒÙ„ Ù…Ø¯ÙŠÙ†Ø©.
    </div>
  </noscript><!-- ADDED -->

  <script>
    const WMO = {
      0:['ØµØ§ÙÙ','â˜€ï¸'],1:['ØºØ§Ù„Ø¨Ù‹Ø§ ØµØ§ÙÙ','ğŸŒ¤ï¸'],2:['ØºØ§Ø¦Ù… Ø¬Ø²Ø¦ÙŠÙ‹Ø§','â›…'],3:['ØºØ§Ø¦Ù…','â˜ï¸'],
      45:['Ø¶Ø¨Ø§Ø¨','ğŸŒ«ï¸'],48:['Ø¶Ø¨Ø§Ø¨ Ù…ØªØ¬Ù…Ø¯','ğŸŒ«ï¸'],
      51:['Ø±Ø°Ø§Ø° Ø®ÙÙŠÙ','ğŸŒ¦ï¸'],53:['Ø±Ø°Ø§Ø° Ù…ØªÙˆØ³Ø·','ğŸŒ¦ï¸'],55:['Ø±Ø°Ø§Ø° ØºØ²ÙŠØ±','ğŸŒ§ï¸'],
      61:['Ù…Ø·Ø± Ø®ÙÙŠÙ','ğŸŒ¦ï¸'],63:['Ù…Ø·Ø± Ù…ØªÙˆØ³Ø·','ğŸŒ§ï¸'],65:['Ù…Ø·Ø± ØºØ²ÙŠØ±','ğŸŒ§ï¸'],
      66:['Ù…Ø·Ø± Ù…ØªØ¬Ù…Ø¯ Ø®ÙÙŠÙ','ğŸŒ§ï¸'],67:['Ù…Ø·Ø± Ù…ØªØ¬Ù…Ø¯ ØºØ²ÙŠØ±','ğŸŒ§ï¸'],
      71:['Ø«Ù„Ø¬ Ø®ÙÙŠÙ','ğŸŒ¨ï¸'],73:['Ø«Ù„Ø¬ Ù…ØªÙˆØ³Ø·','ğŸŒ¨ï¸'],75:['Ø«Ù„Ø¬ ØºØ²ÙŠØ±','â„ï¸'],
      77:['Ø­Ø¨Ø§Øª Ø«Ù„Ø¬','â„ï¸'],80:['Ø²Ø®Ø§Øª Ø®ÙÙŠÙØ©','ğŸŒ¦ï¸'],81:['Ø²Ø®Ø§Øª Ù…Ø·Ø±','ğŸŒ§ï¸'],82:['Ø²Ø®Ø§Øª ØºØ²ÙŠØ±Ø©','â›ˆï¸'],
      85:['Ø²Ø®Ø§Øª Ø«Ù„Ø¬ Ø®ÙÙŠÙØ©','ğŸŒ¨ï¸'],86:['Ø²Ø®Ø§Øª Ø«Ù„Ø¬ ØºØ²ÙŠØ±Ø©','â„ï¸'],
      95:['Ø¹ÙˆØ§ØµÙ Ø±Ø¹Ø¯ÙŠØ©','â›ˆï¸'],96:['Ø¹ÙˆØ§ØµÙ Ù…Ø¹ Ø¨Ø±Ø¯ Ø®ÙÙŠÙ','â›ˆï¸'],99:['Ø¹ÙˆØ§ØµÙ Ù…Ø¹ Ø¨Ø±Ø¯ ØºØ²ÙŠØ±','â›ˆï¸']
    };

    const SA_REGIONS = [
      { name:'Ø§Ù„Ø±ÙŠØ§Ø¶', cities:[
        ['Ø§Ù„Ø±ÙŠØ§Ø¶',24.7136,46.6753],['Ø§Ù„Ø®Ø±Ø¬',24.1483,47.3050],['Ø§Ù„Ø¯Ù„Ù…',23.9907,47.1597],
        ['Ø§Ù„Ù…Ø²Ø§Ø­Ù…ÙŠØ©',24.4703,46.2669],['Ø§Ù„Ù‚ÙˆÙŠØ¹ÙŠØ©',24.0667,45.2800],['ÙˆØ§Ø¯ÙŠ Ø§Ù„Ø¯ÙˆØ§Ø³Ø±',20.3833,45.1167],
        ['Ø§Ù„Ø£ÙÙ„Ø§Ø¬ (Ù„ÙŠÙ„Ù‰)',22.2825,46.7314],['Ø§Ù„Ø²Ù„ÙÙŠ',26.2992,44.8159],['Ø´Ù‚Ø±Ø§Ø¡',25.2583,45.2450],['Ø±Ù…Ø§Ø­',25.2428,47.1608]
      ]},
      { name:'Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø©', cities:[
        ['Ù…ÙƒØ©',21.3891,39.8579],['Ø¬Ø¯Ø©',21.4858,39.1925],['Ø§Ù„Ø·Ø§Ø¦Ù',21.2703,40.4158],
        ['Ø§Ù„Ù„ÙŠØ«',20.1500,40.2667],['Ø§Ù„Ù‚Ù†ÙØ°Ø©',19.1264,41.0789],['Ø±Ø§Ø¨Øº',22.7986,39.0349],
        ['Ø§Ù„Ø¬Ù…ÙˆÙ…',21.7187,39.6956],['Ø®Ù„ÙŠØµ',22.2931,39.2676],['Ø§Ù„Ø®Ø±Ù…Ø©',21.9148,42.0213]
      ]},
      { name:'Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø©', cities:[
        ['Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©',24.5247,39.5692],['ÙŠÙ†Ø¨Ø¹',24.0895,38.0618],['Ø§Ù„Ø¹Ù„Ø§',26.6167,37.9167],
        ['Ø¨Ø¯Ø±',23.7819,38.7906],['Ø®ÙŠØ¨Ø±',25.6944,39.2708]
      ]},
      { name:'Ø§Ù„Ø´Ø±Ù‚ÙŠØ©', cities:[
        ['Ø§Ù„Ø¯Ù…Ø§Ù…',26.4207,50.0888],['Ø§Ù„Ø®Ø¨Ø±',26.2172,50.1971],['Ø§Ù„Ø¸Ù‡Ø±Ø§Ù†',26.2883,50.1130],
        ['Ø§Ù„Ø£Ø­Ø³Ø§Ø¡ (Ø§Ù„Ù‡ÙÙˆÙ)',25.3833,49.5833],['Ø§Ù„Ø¬Ø¨ÙŠÙ„',27.0049,49.6582],['Ø§Ù„Ù‚Ø·ÙŠÙ',26.5202,50.0246],
        ['Ø­ÙØ± Ø§Ù„Ø¨Ø§Ø·Ù†',28.4328,45.9700],['Ø¨Ù‚ÙŠÙ‚',25.9333,49.6667],['Ø±Ø£Ø³ ØªÙ†ÙˆØ±Ø©',26.7081,50.0619],['Ø§Ù„Ù†Ø¹ÙŠØ±ÙŠØ©',27.4833,48.4833]
      ]},
      { name:'Ø§Ù„Ù‚ØµÙŠÙ…', cities:[
        ['Ø¨Ø±ÙŠØ¯Ø©',26.3591,43.9819],['Ø¹Ù†ÙŠØ²Ø©',26.0840,43.9939],['Ø§Ù„Ø±Ø³',25.8694,43.4973],
        ['Ø§Ù„Ù…Ø°Ù†Ø¨',25.8601,44.2228],['Ø§Ù„Ø¨Ø¯Ø§Ø¦Ø¹',26.3270,43.6575],['Ø§Ù„Ø¨ÙƒÙŠØ±ÙŠØ©',26.1451,43.6590],['Ø§Ù„Ù†Ø¨Ù‡Ø§Ù†ÙŠØ©',25.8500,43.0500],['Ø¹ÙŠÙˆÙ† Ø§Ù„Ø¬ÙˆØ§Ø¡',26.2447,43.4950]
      ]},
      { name:'Ø¹Ø³ÙŠØ±', cities:[
        ['Ø£Ø¨Ù‡Ø§',18.2465,42.5117],['Ø®Ù…ÙŠØ³ Ù…Ø´ÙŠØ·',18.3064,42.7290],['Ù…Ø­Ø§ÙŠÙ„',18.5500,42.0500],
        ['Ø±Ø¬Ø§Ù„ Ø£Ù„Ù…Ø¹',18.2000,42.3000],['Ø¨ÙŠØ´Ø©',19.9833,42.6000],['Ø¸Ù‡Ø±Ø§Ù† Ø§Ù„Ø¬Ù†ÙˆØ¨',17.9442,43.5125],
        ['Ø³Ø±Ø§Ø© Ø¹Ø¨ÙŠØ¯Ø©',18.0742,43.1496],['Ø§Ù„Ù†Ù…Ø§Øµ',19.1460,42.1240],['ØªÙ†ÙˆÙ…Ø©',19.1333,42.1333]
      ]},
      { name:'Ø­Ø§Ø¦Ù„', cities:[
        ['Ø­Ø§Ø¦Ù„',27.5114,41.7208],['Ø§Ù„ØºØ²Ø§Ù„Ø©',27.4400,41.0000],['Ø§Ù„Ø´Ù†Ø§Ù†',27.1600,42.0000],['Ø§Ù„Ø´Ù…Ù„ÙŠ',27.3200,40.9000]
      ]},
      { name:'ØªØ¨ÙˆÙƒ', cities:[
        ['ØªØ¨ÙˆÙƒ',28.3833,36.5833],['Ø§Ù„ÙˆØ¬Ù‡',26.2455,36.4525],['Ø¶Ø¨Ø§Ø¡',27.3513,35.7020],
        ['Ø£Ù…Ù„Ø¬',25.0670,37.2610],['Ø­Ù‚Ù„',29.2807,34.9522],['ØªÙŠÙ…Ø§Ø¡',27.6343,38.5469]
      ]},
      { name:'Ø¬Ø§Ø²Ø§Ù†', cities:[
        ['Ø¬Ø§Ø²Ø§Ù†',16.8892,42.5706],['ØµØ§Ù…Ø·Ø©',16.6113,42.9440],['Ø£Ø­Ø¯ Ø§Ù„Ù…Ø³Ø§Ø±Ø­Ø©',16.7000,42.9500],
        ['Ø£Ø¨Ùˆ Ø¹Ø±ÙŠØ´',16.9667,42.8333],['ØµØ¨ÙŠØ§',17.1500,42.6333],['Ø¨ÙŠØ´',17.4500,42.5500],
        ['Ø§Ù„Ø¯Ø±Ø¨',17.7188,42.2398],['Ø§Ù„Ø¹Ø§Ø±Ø¶Ø©',17.0956,43.1495],['ÙØ±Ø³Ø§Ù†',16.7000,42.1160]
      ]},
      { name:'Ù†Ø¬Ø±Ø§Ù†', cities:[
        ['Ù†Ø¬Ø±Ø§Ù†',17.4924,44.1277],['Ø´Ø±ÙˆØ±Ø©',17.4679,47.1336],['Ø­Ø¨ÙˆÙ†Ø§',17.4050,44.5450],['Ø¨Ø¯Ø± Ø§Ù„Ø¬Ù†ÙˆØ¨',17.9080,44.5400],['ÙŠØ¯Ù…Ø©',18.0000,44.6000]
      ]},
      { name:'Ø§Ù„Ø¨Ø§Ø­Ø©', cities:[
        ['Ø§Ù„Ø¨Ø§Ø­Ø©',20.0129,41.4677],['Ø¨Ù„Ø¬Ø±Ø´ÙŠ',19.8997,41.5439],['Ø§Ù„Ù…Ù†Ø¯Ù‚',20.1986,41.3010],
        ['Ø§Ù„Ù…Ø®ÙˆØ§Ø©',19.9954,41.4443],['Ù‚Ù„ÙˆØ©',19.4449,41.2811],['Ø§Ù„Ø¹Ù‚ÙŠÙ‚',20.2760,41.6647]
      ]},
      { name:'Ø§Ù„Ø¬ÙˆÙ', cities:[
        ['Ø³ÙƒØ§ÙƒØ§',29.9697,40.2064],['Ø§Ù„Ù‚Ø±ÙŠØ§Øª',31.3300,37.3433],['Ø¯ÙˆÙ…Ø© Ø§Ù„Ø¬Ù†Ø¯Ù„',29.8100,39.8600],['Ø·Ø¨Ø±Ø¬Ù„',30.5000,38.2167]
      ]},
      { name:'Ø§Ù„Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©', cities:[
        ['Ø¹Ø±Ø¹Ø±',30.9800,41.0380],['Ø±ÙØ­Ø§Ø¡',29.6203,43.4946],['Ø·Ø±ÙŠÙ',31.6772,38.6637],['Ø§Ù„Ø¹ÙˆÙŠÙ‚ÙŠÙ„Ø©',30.3600,43.6500]
      ]}
    ];

    const $regions = document.getElementById('wx-regions');
    const $q = document.getElementById('wx-q');

    async function fetchWeather(lat, lon){
      const u = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,weather_code&timezone=auto`;
      const r = await fetch(u);
      if(!r.ok) throw new Error('fetch failed');
      return r.json();
    }

    function renderRegion(region){
      const el = document.createElement('section');
      el.className = 'wx-region';
      el.innerHTML = `
        <div class="wx-region-h" role="button" aria-expanded="false">
          <div>
            <div class="wx-region-title">${region.name}</div>
            <div class="wx-count">${region.cities.length} Ù…Ø¯Ù†/Ù…Ø­Ø§ÙØ¸Ø©</div>
          </div>
          <div class="wx-chev">â–¼</div>
        </div>
        <div class="wx-cities"><div class="wx-cities-grid"></div></div>
      `;
      const head = el.querySelector('.wx-region-h');
      const grid = el.querySelector('.wx-cities-grid');

      head.addEventListener('click', async () => {
        const opened = el.classList.toggle('wx-open');
        head.setAttribute('aria-expanded', opened ? 'true' : 'false');
        if (opened && !grid.dataset.loaded){
          region.cities.forEach(([city])=>{
            const c = document.createElement('div');
            c.className='wx-card';
            c.innerHTML = `<div class="wx-emoji wx-skeleton" style="width:32px;height:32px;border-radius:8px"></div>
                           <div><div class="wx-city">${city}</div><div class="wx-muted">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¬Ù„Ø¨â€¦</div></div>`;
            grid.appendChild(c);
          });
          const cards = grid.querySelectorAll('.wx-card');
          await Promise.all(region.cities.map(async ([city,lat,lon],i)=>{
            try{
              const data = await fetchWeather(lat,lon);
              const t = Math.round(data.current.temperature_2m);
              const code = data.current.weather_code;
              const [desc, emoji] = WMO[code] || ['ØºÙŠØ± Ù…ØªØ§Ø­','â›…'];
              cards[i].querySelector('.wx-emoji').textContent = emoji;
              cards[i].querySelector('.wx-emoji').classList.remove('wx-skeleton');
              cards[i].querySelector('.wx-muted').textContent = `${t}Â° Ù… â€” ${desc}`;
            }catch(e){
              cards[i].querySelector('.wx-muted').textContent = 'ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø¬Ù„Ø¨';
            }
          }));
          grid.dataset.loaded = '1';
        }
      });

      return el;
    }

    SA_REGIONS.forEach(r => $regions.appendChild(renderRegion(r)));

    $q.addEventListener('input', () => {
      const q = $q.value.trim();
      const terms = q ? q.split(/\s+/) : [];
      [...$regions.children].forEach((sec, idx)=>{
        const region = SA_REGIONS[idx];
        const match = !terms.length || region.cities.some(([name]) => terms.every(t=>name.includes(t)));
        sec.style.display = match ? '' : 'none';
        if (q && match && !sec.classList.contains('wx-open')) sec.querySelector('.wx-region-h').click();
      });
    });

    document.getElementById('wx-expandAll').onclick = () => {
      [...$regions.children].forEach(sec => { if(!sec.classList.contains('wx-open')) sec.querySelector('.wx-region-h').click(); });
    };
    document.getElementById('wx-collapseAll').onclick = () => {
      [...$regions.children].forEach(sec => { if(sec.classList.contains('wx-open')) sec.querySelector('.wx-region-h').click(); });
    };
  </script>
</body>
</html>
