<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>مباريات دوري روشن السعودي</title>
  <link rel="stylesheet" href="assets/style.css" />
</head>
<body>
  <section class="card" id="matches-card" style="margin:20px">
    <h2>📅 مباريات دوري روشن السعودي</h2>
    <div id="matches-container">جاري التحميل…</div>
  </section>

  <script>
    async function loadMatches() {
      const container = document.getElementById("matches-container");
      container.textContent = "جاري التحميل…";

      try {
        const res = await fetch("/.netlify/functions/saudi-matches");
        const data = await res.json();

        if (!data.ok) {
          container.textContent = "لا توجد بيانات حالياً";
          return;
        }

        const block = (title, arr, isPast) => `
          <div style="margin-top:15px;font-weight:bold">${title}</div>
          ${arr.map(m => `
            <div style="border:1px solid #ccc;border-radius:8px;padding:8px;margin-top:6px">
              <div style="display:flex;justify-content:space-between;align-items:center">
                <span>${m.home}</span>
                <strong>${isPast && m.homeScore!=null && m.awayScore!=null 
                  ? `${m.homeScore} - ${m.awayScore}` 
                  : "VS"}</strong>
                <span>${m.away}</span>
              </div>
              <div style="font-size:12px;color:#666">
                🏟️ ${m.venue || "غير محدد"} | 📅 ${m.date} | ⏰ ${m.time}
              </div>
            </div>
          `).join("")}
        `;

        container.innerHTML = block("المباريات السابقة", data.past, true) + block("المباريات القادمة", data.next, false);
      } catch (err) {
        container.textContent = "حدث خطأ أثناء جلب البيانات";
      }
    }

    loadMatches();
  </script>
</body>
</html>
